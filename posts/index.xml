<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Posts on PinkHello</title><link>https://pinkhello.me/posts/</link><description>Recent content in Posts on PinkHello</description><generator>Hugo -- gohugo.io</generator><language>zh</language><copyright>PinkHello, All Rights Reserved</copyright><lastBuildDate>Fri, 11 Jun 2021 09:10:14 +0800</lastBuildDate><atom:link href="https://pinkhello.me/posts/index.xml" rel="self" type="application/rss+xml"/><item><title>12 èŠèŠè™è Chat</title><link>https://pinkhello.me/posts/12-%E8%81%8A%E8%81%8A%E8%9D%99%E8%9D%A0chat/</link><pubDate>Fri, 11 Jun 2021 09:10:14 +0800</pubDate><guid>https://pinkhello.me/posts/12-%E8%81%8A%E8%81%8A%E8%9D%99%E8%9D%A0chat/</guid><description>title: è€å¸æœºèŠèŠBatChat date: 2021-01-31 21:37:07 tags:
BatChat/åŠ å¯†èŠå¤© ä»Šå¤©ï¼Œåœ¨æµè§ˆå°ä¼—è½¯ä»¶çš„æ—¶å€™ï¼Œçªç„¶çœ‹è§ä¸€ä¸ªæ—©æœŸå°ç¼–çš„æ¨å¹¿ï½ï½ï½è™è APPï¼Œè”æƒ³åˆ°ä¹‹å‰æ–°é—»ä¸­çœ‹åˆ°çš„æœ‰ä¸ªè´©å–ä¸ªäººä¿¡æ¯çš„äººè¯´åœ¨è™è APPä¸Šï¼Œå‹¾èµ·äº†æˆ‘çš„å¥½å¥‡å¿ƒï¼Œä½œä¸ºä¸€ä¸ªç¨‹åºğŸ¶ï¼Œé»˜é»˜çš„æƒ³æ¢ç©¶ä¸€ä¸‹è¿™ä¸ªè™è APPç©çš„ä»€ä¹ˆå¥—è·¯ã€‚
ä»€ä¹ˆæ˜¯è™è ï¼ˆBatChatï¼‰ ä¸€æ¬¾å…è´¹çš„ç«¯åˆ°ç«¯åŠ å¯†çš„è™è APPï¼Œéšæ—¶ç•…èŠï¼ åº”ç”¨ IOSã€Android https://batchat.com
å®ƒçš„ç‰¹æ€§ å®‰å…¨ ï½œ ç•…èŠæ—¶ã€ç«¯åˆ°ç«¯åŠ å¯†ï¼ˆæ‰€æœ‰æ¶ˆæ¯ç»è¿‡ç«¯åˆ°ç«¯åŠ å¯†ï¼Œä»»ä½•èŠå¤©è®°å½•ä¸è¿›è¡Œäº‘å­˜å‚¨ï¼Œè®©ä½ çš„ä¿¡æ¯æƒ³è±¡ä¸­æ›´å®‰å…¨ï¼‰ éšç§ ï½œ ç•…èŠæ—¶ã€åŒå‘æ’¤å›ï¼ˆèŠå¤©è®°å½•ä¸€é”®åŒå‘æ’¤å›ï¼ŒåŒæ—¶åˆ é™¤ä½ å’Œå¯¹æ–¹è®¾å¤‡ä¸Šæ‰€æœ‰çš„èŠå¤©è®°å½•ï¼Œæ’¤å›æ•°æ®å¤šæ¬¡è¦†ç›–åˆ é™¤ã€ä¸å¯æ¢å¤ã€ä¿è¯åŒæ–¹çš„éšç§å®‰å…¨ï¼‰ åŒ¿åç¾¤èŠ ï½œ å¼€å¯åŒ¿åç¾¤èŠï¼Œç¾¤é‡Œé¢çš„æ¯ä¸€ä¸ªæˆå‘˜éƒ½å¯ä»¥&amp;quot;å˜èº«&amp;quot;ï¼Œéšè—çœŸå®èº«ä»½ï¼Œç¾¤å†…ä¸å—èº«ä»½çº¦æŸ ä»€ä¹ˆæ˜¯ç«¯åˆ°ç«¯åŠ å¯†ï¼Ÿ ç«¯åˆ°ç«¯åŠ å¯†æ˜¯åœ¨æºç»“ç‚¹å’Œç›®çš„ç»“ç‚¹ä¸­å¯¹ä¼ é€çš„æ•°æ®è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ï¼Œ å› æ­¤æ•°æ®çš„å®‰å…¨æ€§ä¸ä¼šå› ä¸­é—´ç»“ç‚¹çš„ä¸å¯é è€Œå—åˆ°å½±å“ã€‚ è™è APPçš„æ‰€æœ‰æ•°æ®éƒ½é€šè¿‡ç”¨æˆ·ç«¯ç”Ÿæˆçš„ç§é’¥è¿›è¡ŒåŠ å¯†åå†å‘é€ï¼Œä»»ä½•ç¬¬ä¸‰æ–¹åŒ…æ‹¬å¼€å‘è€…éƒ½ä¸èƒ½è§£å¼€æ­¤æ•°æ®.
è™è APPé‡‡ç”¨çš„å®‰å…¨å±‚çº§ï¼Ÿ é€šé“åŠ å¯† é€šé“åŠ å¯†ä¸­é‡‡ç”¨äº†å“ªäº›åŠ å¯†ç®—æ³•ï¼Ÿ é€šé“åŠ å¯†ä¸­ä½¿ç”¨åˆ°çš„ RSA, ECDHE, AES256_CBC, SHA256, SHA1ç­‰ç­‰(å¦‚ä¸‹å›¾)ã€‚
æ­¥éª¤:
(1. å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å…ˆäº§ç”Ÿéšæœºæ•° (2. æœåŠ¡å™¨ä¸‹å‘éšæœºæ•°ã€‚ (3. å®¢æˆ·ç«¯ç”¨ RSA å¯¹å®¢æˆ·ç«¯éšæœºæ•°è¿›è¡ŒåŠ å¯†ï¼Œå¹¶å‘é€ç»™æœåŠ¡å™¨ã€‚ (4. æœåŠ¡å™¨ç”¨ RSA è§£å¯†å®¢æˆ·ç«¯éšæœºæ•°ï¼ˆä½¿ç”¨ RSA çš„ç›®çš„æ˜¯é˜²æ­¢ä¸­é—´äººæ”»å‡»ï¼‰ã€‚ (5. å®¢æˆ·ç«¯ï¼ŒæœåŠ¡å™¨ç”¨è‡ªå·±çš„éšæœºæ•°åŠ ä¸Šå¯¹æ–¹çš„éšæœºæ•°ç”Ÿæˆä¸´æ—¶å¯†é’¥ TempKey å’Œä¸´æ—¶åç§»é‡ TempIV (æ­¤æ—¶åŒæ–¹å‡æŒæœ‰ç›¸åŒçš„ TempKeyå’ŒTempIV)ã€‚ (6. å®¢æˆ·ç«¯æœåŠ¡å™¨å‡ä½¿ç”¨ ECDHE ç”Ÿæˆå„è‡ªçš„å…¬ç§é’¥å¯¹ã€‚ (7.</description></item><item><title>RocketMQæºç é˜…è¯» NameServer</title><link>https://pinkhello.me/posts/rocketmq%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB-nameserver/</link><pubDate>Tue, 25 May 2021 19:00:00 +0800</pubDate><guid>https://pinkhello.me/posts/rocketmq%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB-nameserver/</guid><description>NameServer è§’è‰² NameSever åœ¨ RocketMQ èµ·åˆ°é‡è¦çš„è§’è‰²ï¼Œæ‰¿æ‹…ç€è·¯ç”±ç®¡ç†ã€æœåŠ¡æ³¨å†Œã€æœåŠ¡å‘ç°ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚
æ¥æ”¶ Broker çš„è¯·æ±‚æ³¨å†Œ Broker è·¯ç”±ä¿¡æ¯ æ¥æ”¶ Client è¯·æ±‚æ ¹æ®æŸä¸ª topic è·å–æ‰€æœ‰åˆ° broker çš„è·¯ç”±ä¿¡æ¯ NameSrv æ ¸å¿ƒç±» NamesrvStartup public class NamesrvStartup { //... public static NamesrvController main0(String[] args) { try { NamesrvController controller = createNamesrvController(args); //å¯åŠ¨ NamesrvController start(controller); String tip = &amp;#34;The Name Server boot success. serializeType=&amp;#34; + RemotingCommand.getSerializeTypeConfigInThisServer(); log.info(tip); System.out.printf(&amp;#34;%s%n&amp;#34;, tip); return controller; } catch (Throwable e) { e.printStackTrace(); System.exit(-1); } return null; } //.</description></item><item><title>RocketMQæºç é˜…è¯» é€šä¿¡ç»„ä»¶</title><link>https://pinkhello.me/posts/rocketmq%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB-%E9%80%9A%E4%BF%A1%E7%BB%84%E4%BB%B6/</link><pubDate>Sat, 22 May 2021 16:09:45 +0800</pubDate><guid>https://pinkhello.me/posts/rocketmq%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB-%E9%80%9A%E4%BF%A1%E7%BB%84%E4%BB%B6/</guid><description>RocketMQ æ ¸å¿ƒåŸºçŸ³ å‰é¢å·²ç»ä»‹ç»äº† RocketMQ çš„åŸºæœ¬çš„æ¦‚å¿µå’Œç»„ä»¶ã€‚ä»Šå¤©æˆ‘ä»¬å¼€å¯çœŸæ­£çš„æºç çš„é˜…è¯»è¯—ç¯‡, RocketMQ æ¶ˆæ¯ç³»å„ä¸ªç»„ä»¶ Producerã€Consumerã€Brokerã€NameSrv é€šé€šç¦»ä¸å¼€äº¤äº’ï¼Œé‚£æ˜¯ä½¿ç”¨çš„ä»€ä¹ˆäº¤äº’çš„å‘¢ã€‚ç­”æ¡ˆæ˜¯TCPé•¿é“¾æ¥ã€‚ è€Œ RocketMQ å¼€æºä»£ç å†…éƒ¨ï¼Œå¯¹é€šä¿¡ç›¸å…³çš„è¿›è¡Œäº†ä¸€æ¬¡å°è£…ï¼Œéƒ½åœ¨ rocketmq-remoting æ¨¡å—ä¸‹ï¼Œè¿™ä¸ªæ¨¡å—è¢«å…¶ä»– clientã€brokerã€namesrv åº”ç”¨ã€‚
ç›´æ¥å…ˆè¯´ remoting çš„å®ç°æ˜¯åŸºäº netty åšäº†å°è£…ã€å¯åŠ¨äº†æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ï¼Œæ”¯æŒä¸‰ç§æ¶ˆæ¯çš„å‘é€æ–¹å¼:
åŒæ­¥å‘é€ å•å‘å‘é€ (ä¸éœ€è¦å…³æ³¨å“åº”) å¼‚æ­¥å‘é€ ä¸‹å›¾ä¸ºå¼‚æ­¥é€šä¿¡æµç¨‹ remoting åŒ…ä¸‹çš„æ ¸å¿ƒæ¥å£ä½“ç³» æ¥å£ RemotingService public interface RemotingService { // å¼€å¯ void start(); // å…³é—­ void shutdown(); // æ³¨å†Œ RPCHook void registerRPCHook(RPCHook rpcHook); } æ¥å£ RemotingServer public interface RemotingServer extends RemotingService { // æ³¨å†Œè¯·æ±‚ç±»å‹çš„å¤„ç†å™¨ ã€common æ¨¡å—çš„ org.apache.rocketmq.common.protocol.RequestCode] void registerProcessor(final int requestCode, final NettyRequestProcessor processor, final ExecutorService executor); // æ³¨å†Œé»˜è®¤çš„å¤„ç†å™¨ void registerDefaultProcessor(final NettyRequestProcessor processor, final ExecutorService executor); // æœ¬åœ°çš„ç«¯å£ int localListenPort(); // æ ¹æ® requestCode è·å–å¤„ç†å™¨å’Œä¸šåŠ¡çº¿ç¨‹æ±  Pair&amp;lt;NettyRequestProcessor, ExecutorService&amp;gt; getProcessorPair(final int requestCode); // åŒæ­¥å‘é€ RemotingCommand invokeSync(final Channel channel, final RemotingCommand request, final long timeoutMillis) throws InterruptedException, RemotingSendRequestException, RemotingTimeoutException; // å¼‚æ­¥å‘é€ void invokeAsync(final Channel channel, final RemotingCommand request, final long timeoutMillis, final InvokeCallback invokeCallback) throws InterruptedException, RemotingTooMuchRequestException, RemotingTimeoutException, RemotingSendRequestException; // å•å‘å‘é€ void invokeOneway(final Channel channel, final RemotingCommand request, final long timeoutMillis) throws InterruptedException, RemotingTooMuchRequestException, RemotingTimeoutException, RemotingSendRequestException; } å®ç° NettyRemotingServer è¿™è¾¹é€‰æ‹©æ€§çš„è¿›è¡Œæ‘˜å–è®°å½•æè¿°å•Š</description></item><item><title>RocketMQæºç é˜…è¯» å¼€ç¯‡</title><link>https://pinkhello.me/posts/rocketmq%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB-%E5%BC%80%E7%AF%87/</link><pubDate>Wed, 19 May 2021 10:02:20 +0800</pubDate><guid>https://pinkhello.me/posts/rocketmq%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB-%E5%BC%80%E7%AF%87/</guid><description>RocketMQ æ˜¯ä»€ä¹ˆ? RocketMQ æ˜¯ Alibaba æèµ ç»™ Apache çš„ä¸€æ¬¾åˆ†å¸ƒå¼ã€é˜Ÿåˆ—æ¨¡å‹çš„å¼€æºæ¶ˆæ¯ä¸­é—´ä»¶ã€‚
Github https://github.com/apache/rocketmq ä»å®˜ç½‘ä¹Ÿèƒ½çœ‹å‡ºå®ƒçš„ä¸€äº›ç‰¹æ€§:
ä½å»¶è¿Ÿ é«˜å¯ç”¨ ä¸‡äº¿çº§çš„æ¶ˆæ¯æ”¯æŒ &amp;hellip; RocketMQ åŸºæœ¬æ¦‚å¿µ RocketMQ æ˜¯ç”± Producerã€Brokerã€Consumer ä¸‰éƒ¨åˆ†ç»„æˆ, Producer è´Ÿè´£ç”Ÿäº§ Message, Consumer è´Ÿè´£æ¶ˆè´¹ Message, Broker è´Ÿè´£å­˜å‚¨ Messageã€‚ æ¯ä¸ª Broker å¯ä»¥å­˜å‚¨å¤šä¸ª Topic çš„æ¶ˆæ¯, æ¯ä¸ª Topic çš„æ¶ˆæ¯ä¹Ÿå¯ä»¥åˆ†ç‰‡å­˜å‚¨åœ¨ä¸åŒçš„ Broker ä¸Šã€‚ Message Queue ç”¨äºå­˜å‚¨æ¶ˆæ¯çš„ç‰©ç†åœ°å€ï¼Œæ¯ä¸ª Topic çš„æ¶ˆæ¯åœ°å€å­˜å‚¨äºå¯¹æ­Œ Message Queue ä¸­ã€‚ Consumer Group ç”±å¤šä¸ª Consumer å®ä¾‹ç»„æˆã€‚
Producer è´Ÿè´£ç”Ÿäº§æ¶ˆæ¯ï¼ŒåŒæ­¥å‘é€ã€å¼‚æ­¥å‘é€ã€é¡ºåºå‘é€ã€å•å‘å‘é€ã€‚åŒæ­¥å’Œå¼‚æ­¥éœ€è¦ Broker ç¡®è®¤ä¿¡æ¯ï¼Œå•å‘å‘é€ä¸éœ€è¦ã€‚
Consumer è´Ÿè´£æ¶ˆè´¹æ¶ˆæ¯ï¼Œä¸€èˆ¬å¼‚æ­¥æ¶ˆè´¹ã€‚ä¸€ä¸ªæ¶ˆè´¹è€…ä¼šä» Broker æ‹‰å–æ¶ˆæ¯ã€‚ï¼ˆæ‹‰å–å¼æ¶ˆè´¹ã€æ¨åŠ¨å¼æ¶ˆè´¹ï¼‰
Broker Server è´Ÿè´£å­˜å‚¨ã€è½¬å‘æ¶ˆæ¯ã€‚ æ¥æ”¶ Producer å‘é€æ¥çš„æ¶ˆæ¯å¹¶å­˜å‚¨ã€åŒæ—¶ä¸º Consumer æ‹‰å–è¯·æ±‚åšå‡†å¤‡ã€‚å½“ç„¶ä¹Ÿå­˜å‚¨è¿™æ¶ˆæ¯ç›¸å…³çš„å…ƒæ•°æ®ï¼ˆæ¶ˆè´¹ç»„ã€æ¶ˆè´¹è¿›åº¦åç§»ã€ä¸»é¢˜ã€é˜Ÿåˆ—æ¶ˆæ¯ç­‰ï¼‰</description></item><item><title>11 å‡ ä¸ªå…³äºkafkaçš„çŸ¥è¯†ç‚¹</title><link>https://pinkhello.me/posts/11-%E5%87%A0%E4%B8%AA%E5%85%B3%E4%BA%8Ekafka%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9/</link><pubDate>Wed, 19 May 2021 08:55:19 +0800</pubDate><guid>https://pinkhello.me/posts/11-%E5%87%A0%E4%B8%AA%E5%85%B3%E4%BA%8Ekafka%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9/</guid><description>è®¤è¯†kafka Kafka æ˜¯åˆ†å¸ƒå¼æ¶ˆæ¯ç³»ç»Ÿï¼Œ Apache çš„å­é¡¹ç›®ã€‚æ ‡è¯­ä¹Ÿå˜äº†&amp;quot;åˆ†å¸ƒå¼æµå¹³å°&amp;quot;ï¼Œ ä¸ä¼ ç»Ÿçš„æ¶ˆæ¯ç³»ç»Ÿä¸åŒç‚¹åœ¨äº
åˆ†å¸ƒå¼çš„ï¼Œæ˜“äºæ‰©å±• ä¸ºå‘å¸ƒå’Œè®¢é˜…æä¾›äº†é«˜åå æ”¯æŒå¤šè®¢é˜…è€…ï¼Œåœ¨å¤±è´¥çš„æ—¶å€™èƒ½è‡ªåŠ¨å¹³è¡¡æ¶ˆè´¹è€… æ¶ˆæ¯çš„æŒä¹…åŒ– kafka çš„æ¶æ„ å‡ ç‚¹ï¼Ÿ
Kafka çš„ Topic å’Œ Partition å†…éƒ¨å¦‚ä½•å­˜å‚¨ï¼Ÿ ä¸ä¼ ç»Ÿçš„æ¶ˆæ¯ç³»ç»Ÿç›¸æ¯”ï¼Œ Kafka æ¶ˆè´¹æ¨¡å‹æœ‰å•¥ä¼˜ç‚¹ï¼Ÿ Kafka æ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼æ•°æ®å­˜å‚¨å’Œæ•°æ®çš„è¯»å–ï¼Ÿ Kafka æ¶æ„ ä¸€ä¸ª Kafka é›†ç¾¤ï¼Œå¤šä¸ª Producer ï¼Œå¤šä¸ª Consumer ï¼Œå¤šä¸ª Broker ï¼Œ é€‰ä¸¾ Leader ä»¥åŠåœ¨ Consumer Group å‘ç”Ÿå˜åŒ–æ—¶è¿›è¡Œ reblance ã€‚
Broker æ¶ˆæ¯ä¸­é—´ä»¶çš„å¤„ç†èŠ‚ç‚¹ï¼Œä¸€ä¸ª Kafka èŠ‚ç‚¹å°±æ˜¯ä¸€ä¸ª Broker ï¼Œ ä¸€ä¸ªæˆ–è€…å¤šä¸ª Broker ç»„æˆ Kafka é›†ç¾¤ Topic Kafka æ ¹æ® Topic å¯¹ Message è¿›è¡Œå½’ç±»ï¼Œå‘å¸ƒåˆ° Kafka çš„æ¯æ¡ Message éƒ½è¦æŒ‡å®š Topic Producer å‘ Broker å‘ç”Ÿ message Consumer ä» Broker è¯»å– message Consumer Group æ¯ä¸ª Consumer å±äºç‰¹å®šçš„ Groupï¼Œä¸€ä¸ª Message å¯ä»¥å‘é€ç»™ä¸åŒçš„ Consumer Group ï¼Œä½†æ˜¯åŒä¸€ä¸ª Group ä¸‹çš„åªæœ‰ä¸€ä¸ª Consumer èƒ½æ¶ˆè´¹è¯¥ Message Partition ç‰©ç†æ¦‚å¿µï¼Œä¸€ä¸ª Topic ä¸‹å¯ä»¥åˆ†ä¸ºå¤šä¸ª Partition, æ¯ä¸ª Partition ä¸‹æ˜¯æœ‰åºçš„ã€‚ ä¸‹é¢æ¥è®²è¿° ä¸Šé¢ä¸ºé—®é¢˜å•Š</description></item><item><title>10 å¤šåŸŸåä¸‹çš„SSH</title><link>https://pinkhello.me/posts/10-%E5%A4%9A%E5%9F%9F%E5%90%8D%E4%B8%8B%E7%9A%84ssh/</link><pubDate>Mon, 10 May 2021 08:52:57 +0800</pubDate><guid>https://pinkhello.me/posts/10-%E5%A4%9A%E5%9F%9F%E5%90%8D%E4%B8%8B%E7%9A%84ssh/</guid><description>å‰è¨€ æœ‰æ—¶å€™æˆ‘ä»¬ï¼Œæœ‰å¤šä¸ª git è´¦å·ï¼ˆGitlabã€GitHubï¼‰ï¼Œè¿™æ—¶å€™å¦‚æœæ˜¯åŒä¸€ä¸ªè´¦å·ï¼ˆé‚®ç®±æ³¨å†Œï¼‰ï¼Œé‚£ä¸ä¼šæœ‰é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœä¸æ˜¯ç›¸åŒçš„è´¦å·å‘¢ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨ SSH KEY åšå…å¯†ç™»å½•æ—¶å€™ï¼Œå¤´ç—›äº†ã€‚
è¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦é’ˆå¯¹ä¸åŒçš„è´¦å·ï¼Œç”Ÿæˆä¸åŒçš„ SSH Keyï¼Œå¹¶ä¸”é…ç½®ä¸åŒçš„åŸŸåä½¿ç”¨ä¸åŒçš„Key
ç”Ÿæˆä¸€ä¸ª SSH KEY ssh-keygen -t rsa -C &amp;#34;username@email.com&amp;#34; ä¸€è·¯ Enterï¼Œå¹¶ä¸”åœ¨ç”Ÿæˆæ—¶å€™æŒ‡å®šåå­—ï¼Œï¼ˆä¸æŒ‡å®šåå­—ä¼šä½¿ç”¨é»˜è®¤çš„ï¼‰å¾—åˆ°
id_rsa # ç§é’¥ id_rsa.pub # å…¬é’¥ é‡å¤ä¸Šä¸€ä¸ªæ­¥éª¤ï¼Œç”Ÿæˆå¤šä¸ª ç§é’¥å’Œå…¬é’¥ github_id_rsa github_id_rsa.pub gitlab_id_rsa gitlab_id_rsa.pub é…ç½®ç›¸åº”çš„åŸŸåå¯¹åº”çš„ SSH-KEY æœ¬åœ°ç›®å½• ~/.ssh/ ä¸‹ï¼ŒæŸ¥é˜…æœ‰æ²¡æœ‰ config æ–‡ä»¶, ä¸å­˜åœ¨å°±æ–°å»º config æ–‡ä»¶ Host github HostName github.com User UserName PreferredAuthentications publickey IdentityFile ~/.ssh/github_id_rsa Host gitlab HostName gitlab.com User UserName PreferredAuthentications publickey IdentityFile ~/.ssh/gitlab_id_rsa å°†å¯†é’¥æ·»åŠ è¿›å…¥ SSH-AGENT ä¸­ ssh-add ~/.</description></item><item><title>ç®—æ³• Bitmap</title><link>https://pinkhello.me/posts/%E7%AE%97%E6%B3%95-bitmap/</link><pubDate>Wed, 28 Apr 2021 11:59:58 +0800</pubDate><guid>https://pinkhello.me/posts/%E7%AE%97%E6%B3%95-bitmap/</guid><description>bitmap åŸç† bitmapå­—é¢ä¸ºä½å›¾æ˜ å°„, åŸç†æ˜¯ä½¿ç”¨ä¸€ä¸ª bit æ ‡è®°æŸä¸ªå…ƒç´ å¯¹åº”çš„ valueï¼Œè€Œ key å³è¯¥å…ƒç´ ã€‚å› ä¸ºåªæœ‰ä¸€ä¸ª bit æ¥å­˜å‚¨ä¸€ä¸ªæ•°æ®, å› è€Œå¯ä»¥å¤§å¤§çš„èŠ‚çœç©ºé—´ã€‚
æ•°å€¼æ˜ å°„: å‡å¦‚å¯¹ 0-31 ä¸ªå†…çš„3ä¸ªå…ƒç´ ï¼ˆ10, 17, 28ï¼‰è¿›è¡Œæ’åº,å¯ä»¥é‡‡ç”¨ BitMap æ–¹æ³•, å¦‚ä¸‹å›¾, å¯¹åº”çš„åŒ…å«çš„ä½ç½®å°†å¯¹åº”çš„å€¼ä» 0 å˜æ›´ä¸º 1 å‡å¦‚éœ€è¦è¿›è¡Œæ’åºå’Œæ£€ç´¢ï¼Œåªéœ€è¦ä¾æ¬¡éå†è¿™ä¸ªæ•°æ®ç»“æ„ï¼Œç¢°åˆ° 1 çš„æƒ…å†µï¼Œæ•°æ®å­˜åœ¨
å­—ç¬¦ä¸²æ˜ å°„: å­—ç¬¦ä¸²ä¹Ÿå¯æ˜ å°„ï¼Œåªä¸è¿‡éœ€è¦ç»è¿‡ä¸€ä¸ªHashæ­¥éª¤,é€šè¿‡æ˜ å°„å…³ç³»å¯ä»¥åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦å­˜åœ¨ã€‚ä½†æ˜¯å› ä¸º Hashæ˜¯å°†ä¸ç¡®å®šé•¿åº¦çš„å€¼å˜æ›´ä¸ºç¡®å®šå¤§å°çš„å€¼,å­˜åœ¨Hashå†²çªæ€§ï¼Œæ‰€ä»¥ä¸€èˆ¬è¦æœ€å¤§åŒ–çš„åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦çœŸçš„å­˜åœ¨ï¼Œå¯ä»¥å°†è¿™ä¸ªå­—ç¬¦ä¸²ç»è¿‡ä¸åŒçš„Hashå‡½æ•°æ˜ å°„ä¸åŒçš„ä½ç½®ã€‚
bitmap çš„ å»ºç«‹ã€æŸ¥æ‰¾ã€æ·»åŠ ã€åˆ é™¤ã€åˆ¤æ–­ åŸç† å»ºç«‹ Bitmap çš„åˆ›å»ºå¯ä»¥ä½¿ç”¨ byte æ•°ç»„ï¼Œ 1 byte = 8 bit (ä¹Ÿå¯ä½¿ç”¨ int æ•°ç»„, 1 int = 32 bit, long æ•°ç»„, 1 long = 64 bit) ä¹Ÿå°±æ˜¯è¯´åˆ°æœ€åçš„æ•°æ®çš„å¤§å°å»ºç«‹åªéœ€è¦åˆ›å»º æ•°ç»„é•¿åº¦ä¸º int[ 1 + N/32 ] byte[ 1 + N/8 ] long[ 1 + N/64 ] å³å¯å­˜å‚¨ï¼ŒNè¡¨ç¤ºè¦å­˜å‚¨çš„æœ€å¤§çš„å€¼ã€‚</description></item><item><title>09 ä½¿ç”¨githookç»Ÿä¸€codestyle</title><link>https://pinkhello.me/posts/09-%E4%BD%BF%E7%94%A8githook%E7%BB%9F%E4%B8%80codestyle/</link><pubDate>Sun, 25 Apr 2021 08:46:52 +0800</pubDate><guid>https://pinkhello.me/posts/09-%E4%BD%BF%E7%94%A8githook%E7%BB%9F%E4%B8%80codestyle/</guid><description>gradle ä¼˜åŒ– build æŒ‡å®š -g cache ç¼“å­˜ checkstyle å®è·µ åŸºç¡€é•œåƒåŒ…å« checkstyle.xml æˆ–è€… æ”¾åˆ°è¿œç¨‹å…¶ä»–å¯è¢«æ‹‰å–åˆ°çš„å­˜å‚¨ä»‹è´¨ ï¼Œé˜²æ­¢é¡¹ç›®æˆå‘˜æ”¹åŠ¨ gitlab-ci beforeScript æ ‡ç­¾æ‰§è¡Œå‘½ä»¤ copy /checkstyle.xml è¿›å…¥é¡¹ç›®ï¼Œ(è¦†ç›–é¡¹ç›®ä¸­å­˜åœ¨çš„). gradle ç¼–è¯‘çš„è¯ å°† maven-publish.gradle repos.gradle checkstyle.gradle(checkstyle æ’ä»¶é…ç½® ç‰ˆæœ¬ä»¥åŠ configFile) æŠ½å‡ºæ”¾åˆ°å…¬å…±çš„åœ°æ–¹ï¼Œé˜²æ­¢é¡¹ç›®å›¢é˜Ÿæˆå‘˜æ”¹çš„. maven çš„è¯ï¼Œå¯ä»¥åœ¨å…¬å…±çš„é¡¶çº§ç»§æ‰¿ pom é‡Œé¢æŒ‡å®šå˜é‡checkstyle.config.location. mvn checkstyle -Dcheckstyle.config.location=checkstyle.xml git hook å®è·µ æ¯ä¸ªé¡¹ç›®é‡Œé¢ .git/hooks é‡Œé¢æœ‰å¾ˆå¤šçš„ hook æ¨¡æ¿
å®¢æˆ·ç«¯é’©å­åŒ…æ‹¬:pre-commitã€prepare-commit-msgã€commit-msgã€post-commitç­‰ï¼Œä¸»è¦ç”¨äºæ§åˆ¶å®¢æˆ·ç«¯gitçš„æäº¤å·¥ä½œæµã€‚
æœåŠ¡ç«¯é’©å­ï¼špre-receiveã€post-receiveã€updateï¼Œä¸»è¦åœ¨æœåŠ¡ç«¯æ¥æ”¶æäº¤å¯¹è±¡æ—¶ã€æ¨é€åˆ°æœåŠ¡å™¨ä¹‹å‰è°ƒç”¨ã€‚
ä»Šå¤©å®è·µçš„æ˜¯ å®¢æˆ·ç«¯é’©å­ï¼Œä¼˜åŒ–å‡å°‘ä¸ç¬¦åˆè§„èŒƒæˆ–è€…ä½è´¨é‡ä»£ç è¿›å…¥ gitflow æµç¨‹.
pre-commit å’Œ commit-msg æ˜¯ä»Šå¤©çš„ä¸»è§’ï¼Œpre-commit æ‰§è¡Œä¸ git add ä¹‹åï¼Œåœ¨è¿›è¡Œ git commit ä¹‹å‰è¿›è¡Œçš„æ“ä½œ. å¯ä»¥ç”¨æ¥è¿›è¡Œ code check code lint ç­‰ç­‰, commit-msg æ‰§è¡Œä¸ git commit å¸¸ç”¨äºè¡¥å…¨ git commit message check msg ç­‰ç­‰ å½“ç„¶è¿˜æœ‰å…¶ä»–éªšæ“ä½œçš„åŠŸèƒ½ï¼Œå¯ä»¥é€šçŸ¥ï¼Œç­‰ç­‰ï¼Œåšå¤šç§è‡ªåŠ¨åŒ–</description></item><item><title>æ•°æ®ç»“æ„ä¸ç®—æ³• 01 ä¼˜å…ˆé˜Ÿåˆ—</title><link>https://pinkhello.me/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95-01-%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/</link><pubDate>Thu, 22 Apr 2021 23:53:53 +0800</pubDate><guid>https://pinkhello.me/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95-01-%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/</guid><description>ä¸ºä»€ä¹ˆéœ€è¦ä¼˜å…ˆé˜Ÿåˆ— é˜Ÿåˆ—æ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡ºçš„æ•°æ®ç»“æ„ï¼Œæ‰€æœ‰å…ƒç´ ä¼˜å…ˆçº§ä¸€æ ·ï¼Œå®Œå…¨éµå®ˆå…ˆè¿›å…ˆå‡ºçš„è§„åˆ™ã€‚ä½†æ˜¯å¾€å¾€ç°å®æƒ…å†µä¸‹ï¼Œè¿™ç§å…¬å¹³éœ€è¦è¢«æ‰“ç ´ã€‚å®ƒæ˜¯ä¸€ä¸ªåŠ¨æ€å˜åŒ–çš„è¿‡ç¨‹ï¼Œå¯èƒ½æœ‰ä¸€äº›éœ€è¦ä¼˜å…ˆï¼Œä¸€äº›éœ€è¦é™ä½ä¼˜å…ˆçº§ã€‚ä¸”è¿™äº›æ•°æ®æ˜¯ä¸€ä¸ªåŠ¨æ€å˜åŒ–çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥éœ€è¦ç»´ç³»è¿™ä¸ªä¼˜å…ˆçº§é˜Ÿåˆ—ã€‚
ä¼˜å…ˆé˜Ÿåˆ—çš„å®ç°æ–¹å¼ æ•°ç»„å®ç° é“¾è¡¨</description></item><item><title>08 Gradleå¤šæ¨¡å—é¡¹ç›®æ¨¡æ¿åŒ–</title><link>https://pinkhello.me/posts/08-gradle%E5%A4%9A%E6%A8%A1%E5%9D%97%E9%A1%B9%E7%9B%AE%E6%A8%A1%E6%9D%BF%E5%8C%96/</link><pubDate>Tue, 20 Apr 2021 08:43:21 +0800</pubDate><guid>https://pinkhello.me/posts/08-gradle%E5%A4%9A%E6%A8%A1%E5%9D%97%E9%A1%B9%E7%9B%AE%E6%A8%A1%E6%9D%BF%E5%8C%96/</guid><description>å‰è¨€ Maven å†—ä½™ï¼Œ Gradle ç®€å•è½»ä¾¿ å…¬å¸åŸæœ‰çš„ CI/CD æµç¨‹ï¼Œå€ŸåŠ© Maven æ’ä»¶ build Docker Image,æ”¹ä¸ºåŸç”Ÿ Docker Runner åŸå§‹æ„å»º
1ã€å¤šæ¨¡å—é¡¹ç›® project- app- src/main/[java|resources] | src/test/[java|resources] # classpath- Dockerfile # Dockerfile- build.gradle # APP æ¨¡å— gradle é…ç½®- sdk # SDK æ¨¡å— å¯æœ‰å¯æ— - src/main/java- build.gradle # SDK çš„ gradle é…ç½®- deploy # delpoy é¡¹ç›® æ³¨æ„ checkstyle ç›¸å…³é…ç½®åœ¨è¿™é‡Œé¢- checkstyle/**- **.yml- build.gradle # é¡¹ç›®é¡¶çº§ gradleé…ç½®- gradle- wrapper/** # gradle é…ç½®ä¿¡æ¯- check.gradle # pmd &amp;amp; checkstyle- repo.gradle # ä»“åº“å®šä¹‰# test.</description></item><item><title>07 Fabricä½¿ç”¨</title><link>https://pinkhello.me/posts/07-fabric%E4%BD%BF%E7%94%A8/</link><pubDate>Sun, 28 Mar 2021 08:40:46 +0800</pubDate><guid>https://pinkhello.me/posts/07-fabric%E4%BD%BF%E7%94%A8/</guid><description>docker åŠ å…¥systemctlç¯å¢ƒå¹¶å¯åŠ¨docker å¿«é€Ÿå®‰è£…docker
curl -sSL https://get.daocloud.io/docker | sh systemctl enable docker systemctl start docker docker-compose å®‰è£… èµ°å¤–ç½‘æˆ–è€… github å¤ªæ…¢,å¯ä»¥ä½¿ç”¨å†…éƒ¨åŠ é€Ÿ
curl -L &amp;#34;https://github.com/docker/compose/releases/download/X.XX.X/docker-compose-$(uname -s)-$(uname -m)&amp;#34; -o /usr/local/bin/docker-compose curl -L https://get.daocloud.io/docker/compose/releases/download/1.26.2/docker-compose-`uname -s`-`uname -m` &amp;gt; /usr/local/bin/docker-compose fabric è‡ªåŠ¨è¿ç»´ python è™šæ‹Ÿç¯å¢ƒå®‰è£… å‚è€ƒ
åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„è™šæ‹Ÿç¯å¢ƒ
cd ç›®æ ‡ç›®å½• virtualenv --no-site-packages venv æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate python pip å®‰è£… Fabric pip install fabric3 python pip å¯¼å‡ºä¾èµ– pip freeze &amp;gt; requirements.txt å…¶ä»–python pip å¯¼å…¥å®‰è£… pip install -r requirements.txt Fabric æ–‡æ¡£ fabfiles æ–‡æ¡£ # encoding=utf-8 from fabric.</description></item><item><title>06 é«˜æ€§èƒ½é˜Ÿåˆ—Disruptor</title><link>https://pinkhello.me/posts/06-%E9%AB%98%E6%80%A7%E8%83%BD%E9%98%9F%E5%88%97disruptor/</link><pubDate>Mon, 15 Mar 2021 08:35:29 +0800</pubDate><guid>https://pinkhello.me/posts/06-%E9%AB%98%E6%80%A7%E8%83%BD%E9%98%9F%E5%88%97disruptor/</guid><description>èƒŒæ™¯ Disruptor æ˜¯ å¤–æ±‡äº¤æ˜“å…¬å¸LMAXå¼€å‘çš„é«˜æ€§èƒ½é˜Ÿåˆ—ã€ç ”å‘æ˜¯ä¸ºäº†è§£å†³å†…å­˜é˜Ÿåˆ—å»¶è¿Ÿé—®é¢˜ã€‚ Disruptor ä¸€èˆ¬ç”¨äºçº¿ç¨‹é—´çš„æ¶ˆæ¯ä¼ é€’ã€‚ Disruptor GitHub åœ°å€
Disruptor ä»‹ç» ç†è§£ Disruptor æœ€å¥½çš„æ–¹å¼ï¼Œé€‰æ‹©ä¸€ä¸ªæœ€æ¥è¿‘ç†Ÿæ‚‰çš„æ ·æœ¬è¿›è¡Œæ¯”è¾ƒã€‚åœ¨è¿™ä¸ªå‰æä¸‹ï¼Œå¯ä»¥é€‰æ‹© Java ä¸­çš„ BlockingQueue. å’Œé˜Ÿåˆ—ç›¸ä¼¼ï¼ŒDisruptor ä¹Ÿæ˜¯åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­ä¸åŒçš„çº¿ç¨‹ä¹‹é—´è¿›è¡Œä¼ é€’æ•°æ®çš„ï¼ˆä¾‹å¦‚æ¶ˆæ¯æˆ–è€…äº‹ä»¶ï¼‰ï¼ŒåŒæ—¶ Disruptor æä¾›äº†ä¸€äº›å°†å…³é”®åŠŸèƒ½å’Œé˜Ÿåˆ—åˆ†å¼€çš„ç‰¹æ€§ï¼š
å‘æ¶ˆè´¹è€…å‘é€å¤šæ’­äº‹ä»¶ æ¶ˆæ¯è€…ä¾èµ–å…³ç³»å›¾ é¢„å…ˆä¸ºäº‹ä»¶åˆ†é…å†…å­˜ å¯é€‰çš„ï¼ˆæ— é”ï¼‰ Disruptor æ ¸å¿ƒæ¦‚å¿µ åœ¨æˆ‘ä»¬ç†è§£Disruptorå¦‚ä½•å·¥ä½œä¹‹å‰ï¼Œäº†è§£ä¸‹æ ¸å¿ƒæ¦‚å¿µ
Ring Buffer ç¯å½¢æ•°ç»„è®¾è®¡ï¼Œä¸ºäº†é¿å…åƒåœ¾å›æ”¶ï¼Œé‡‡ç”¨çš„æ•°ç»„ç»“æ„ï¼Œä»3.0å¼€å§‹ï¼Œç¯å½¢ç¼“å†²åŒºä¸»è¦å­˜å‚¨å’Œæ›´æ–°åœ¨Disruptorä¸­ç§»åŠ¨çš„æ•°æ®ï¼ˆäº‹ä»¶ï¼‰ Sequence Disruptor æ¯ä¸ªæ¶ˆè´¹è€…(EventProcessor)ç»´æŠ¤ä¸€ä¸ª Sequenceï¼Œå¹¶å‘çš„å¤§å¤šæ•°ä»£ç éƒ½ä¾èµ– Sequence å€¼çš„æ”¹åŠ¨ï¼Œæ‰€ä»¥ Sequence æ”¯æŒ AtomicLong çš„å¤§éƒ¨åˆ†ä¹Ÿè¡Œ, å”¯ä¸€ä¸åŒçš„æ˜¯ Sequence åŒ…å«é¢å¤–çš„åŠŸèƒ½æ¥é˜»æ­¢Sequenceå’Œå…¶ä»–å€¼ä¹‹é—´çš„ä¼ªå…±äº«(false sharing) Sequencer
Disruptor æ ¸å¿ƒé€»è¾‘, ä¸¤ä¸ªå®ç°: å•ç”Ÿäº§è€…å’Œå¤šç”Ÿäº§è€…ã€‚ä»–ä»¬å®ç°äº†ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…ä¹‹é—´çš„å¿«é€Ÿä¼ é€’çš„å¹¶å‘ç®—æ³•ã€‚ Sequence Barrier ç”± Sequencer ç”Ÿæˆï¼ŒåŒ…å«æ­¤ Sequencer å‘å¸ƒçš„ Sequence æŒ‡é’ˆä»¥åŠä¾èµ–çš„å…¶ä»–æ¶ˆè´¹è€…çš„ Sequenceã€‚åŒ…å«äº†æ¶ˆè´¹è€…æ£€æŸ¥æ˜¯å¦æœ‰å¯ç”¨çš„äº‹ä»¶çš„ä»£ç ã€‚ Wait Strategy æ¶ˆè´¹è€…ç­‰å¾…äº‹ä»¶çš„ç­–ç•¥ï¼Œè¿™ä¸ªäº‹ä»¶ç”±ç”Ÿäº§è€…æ”¾å…¥ï¼Œå†³å®šäº†æ¶ˆè´¹è€…æ€ä¹ˆç­‰å¾…ç”Ÿäº§è€…å°†äº‹ä»¶æ”¾å…¥ Disruptor Event ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…ä¼ é€’çš„äº‹ä»¶ï¼Œå®Œå…¨ç”±ç”¨æˆ·å®šä¹‰ EventProcessor å¤„ç†äº‹ä»¶çš„ä¸»è¦å¾ªç¯ï¼ˆmain event loopï¼‰ï¼ŒåŒ…å«äº†ä¸€ä¸ª Sequeuece.</description></item><item><title>16 Hexoè¿ç§»Hugo</title><link>https://pinkhello.me/posts/16-hexo%E8%BF%81%E7%A7%BBhugo/</link><pubDate>Wed, 10 Feb 2021 19:36:33 +0800</pubDate><guid>https://pinkhello.me/posts/16-hexo%E8%BF%81%E7%A7%BBhugo/</guid><description>ä¸ºä»€ä¹ˆè¿ç§» Hugo Hugo ä½¿ç”¨æ¯” Hexo ç®€å•, åªæœ‰å•ç‹¬çš„ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ è‹¦äº Hexo çš„ NodeModule ç®¡ç† è¿ç§»æˆæœ¬æ›´ä½, ç»“åˆ Github Action å®ç° Markdown æ–‡ç« å‘å¸ƒ, è‡ªåŠ¨æ›´æ–°è‡³é™æ€ç«™ è§„åˆ’ï¼šåŠ å…¥è‡ªå®šä¹‰åŸŸåä»¥åŠåšé™æ€èµ„æºCDNåšçš„åŠ é€Ÿ å‰ç½®å·¥ä½œ 1ã€ ä¹‹å‰åŸºæœ¬æ‰€æœ‰çš„åšå®¢éƒ½æ‰˜ç®¡ä¸ github,è¿™æ¬¡ä¹Ÿä¸ä¾‹å¤–, å¤ç”¨ https://pinkhello.github.io,åˆ›å»ºä¸¤ä¸ªé¡¹ç›®
pinkhello.github.io template ä»“åº“ pinkhello.github.io.source private ä»“åº“ 2ã€å‡†å¤‡OpenSSHç§é’¥å’Œå…¬é’¥
pinkhello.github.io ä»“åº“ æ·»åŠ  settings -&amp;gt; Deploy keys -&amp;gt; Add Deploy Key (å°†å…¬é’¥æ·»åŠ è¿›å»ã€æ³¨æ„å…è®¸ Write) pinkhello.github.io.source ä»“åº“ æ·»åŠ  settings -&amp;gt; Actions secrets -&amp;gt; New Repository Secret ( NAME : ACTION_DEPLOY_KEY, Value: ç§é’¥ ) 3ã€git clone pinkhello.</description></item><item><title>15 è®°ä¸€æ¬¡dockeræ—¥å¿—ç£ç›˜å‘Šè­¦é—®é¢˜</title><link>https://pinkhello.me/posts/15-%E8%AE%B0%E4%B8%80%E6%AC%A1docker%E6%97%A5%E5%BF%97%E7%A3%81%E7%9B%98%E5%91%8A%E8%AD%A6%E9%97%AE%E9%A2%98/</link><pubDate>Wed, 10 Feb 2021 10:05:29 +0800</pubDate><guid>https://pinkhello.me/posts/15-%E8%AE%B0%E4%B8%80%E6%AC%A1docker%E6%97%A5%E5%BF%97%E7%A3%81%E7%9B%98%E5%91%8A%E8%AD%A6%E9%97%AE%E9%A2%98/</guid><description>å‰æ™¯ ä»Šæ—¥ï¼Œæˆ‘æ­£åœ¨å¼€å¼€å¿ƒå¿ƒçš„åˆ·ç€JFXçš„Codingä¸­ï¼Œçªç„¶çº¿ä¸ŠæŠ¥è­¦ç¾¤ä¸­çˆ†äº†ä¸ªç‚¸å¼¹ï¼ŒEC2ç£ç›˜è¶…è¿‡80%ã€‚
å¤„ç†è¿‡ç¨‹ è§£å†³é—®é¢˜å§¿åŠ¿å°±ä½ï¼š
èµ¶ç´§å¼€æœº ==ã€‹ â¤ï¸ä¸­ä¸‡åŒ¹ğŸ¦™å¥”è…¾è€Œè¿‡ â¤ï¸ä¸­MMP
é»˜é»˜çš„é€šè¿‡è·³æ¿æœºè¿›å…¥ç›®æ ‡æœºå™¨
ä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€,æ‰§è¡ŒæŸ¥çœ‹ç£ç›˜å ç”¨å¤§å°ï¼Œæˆ‘çš„ä¹–ä¹–ï¼Œå ç”¨ç¡®å®è¶…è¿‡äº†87%äº†ï¼Œä¸€ä¸‹å­æš´æ¶¨çš„
# æŸ¥çœ‹ç£ç›˜å ç”¨å¤§å° &amp;gt; sudo df -h # æŸ¥çœ‹å½“å‰ç›®å½•æ€»é‡ &amp;gt; sudo du -sh å¼€å§‹å®šä½å…·ä½“å“ªä¸ªæ–‡ä»¶æˆ–è€…ç›®å½•å ç”¨è¿™ä¹ˆå¤§,è·‘åˆ°æ ¹ç›®å½•ä¸‹ã€‚ # æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹ä¸€çº§å­æ–‡ä»¶å’Œå­ç›®å½•å ç”¨çš„ç£ç›˜å®¹é‡ &amp;gt; sudo du -lh --max-depth=1 ä¸€å¼€å§‹çŒœæƒ³å¯èƒ½æ˜¯dockerå®¹å™¨çš„æ—¥å¿—å ç”¨å¤§ï¼Œä¸Šé¢æ‰§è¡Œåï¼Œè¿˜çœŸ TM æ˜¯ /var/lib/docker/containers ç›®å½•å ç”¨ 42G å¼€å§‹æŸ¥çœ‹æ˜¯å“ªä¸ªå®¹å™¨å ç”¨çš„è¿™ä¹ˆå¤§çš„ç©ºé—´ # æŸ¥çœ‹ containers æ—¥å¿—ç›®å½•æ’åº &amp;gt; sudo du -d1 -h /var/lib/docker/containers | sort -h # æŸ¥çœ‹å…·ä½“çš„å“ªä¸ªæ—¥å¿—æ–‡ä»¶å¤§ &amp;gt; sudo find /var/lib/docker/containers -name *.</description></item><item><title>05 OAuth2.0 é‚£ç‚¹äº‹</title><link>https://pinkhello.me/posts/05-oauth2.0%E9%82%A3%E7%82%B9%E4%BA%8B/</link><pubDate>Wed, 10 Feb 2021 08:32:02 +0800</pubDate><guid>https://pinkhello.me/posts/05-oauth2.0%E9%82%A3%E7%82%B9%E4%BA%8B/</guid><description>OAuth2.0 æ˜¯ä»€ä¹ˆ? OAuth2.0 Framework RFC 6749 [https://tools.ietf.org/html/rfc6749]
OAuth å°±æ˜¯ä¸€ç§æˆæƒæœºåˆ¶ï¼Œå®ƒä»‹äºå®¢æˆ·ç«¯ä¸èµ„æºæ‰€æœ‰è€…çš„æˆæƒå±‚ï¼Œä¸ºäº†åˆ†ç¦»ä¸åŒçš„è§’è‰²ã€‚ åœ¨èµ„æºæ‰€æœ‰è€…åŒæ„å¹¶å‘å®¢æˆ·ç«¯é¢å‘ä»¤ç‰Œåï¼Œå®¢æˆ·ç«¯æºå¸¦ä»¤ç‰Œå¯ä»¥è®¿é—®éƒ¨åˆ†æˆ–å…¨éƒ¨èµ„æºã€‚
OAuth2.0æ˜¯OAuthåè®®çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œä¸º2.0ç‰ˆæœ¬ã€‚æœ‰æ„æ€çš„æ˜¯ 2.0ä¸ 1.0å¹¶ä¸å…¼å®¹ã€‚
OAuth2.0 æˆæƒæ–¹å¼ è·å–æˆæƒçš„è¿‡ç¨‹
æˆæƒç (authorization-code) éšè—å¼(implicit) å¯†ç (password) å®¢æˆ·ç«¯å‡­è¯(client credentials) ä¸ç®¡å“ªç§æ–¹å¼ï¼Œéƒ½éœ€è¦åœ¨ç¬¬ä¸‰æ–¹åº”ç”¨ç”³è¯·ä»¤ç‰Œä¹‹å‰ï¼Œéœ€è¦åœ¨ç³»ç»Ÿä¸­ç”³è¯·èº«ä»½å”¯ä¸€æ ‡è¯†: å®¢æˆ·ç«¯ID Client IDå’Œ å®¢æˆ·ç«¯ç§˜é’¥ Client Secret. è¿™æ ·èƒ½ç¡®ä¿Tokenä¸è¢«æ¶æ„ä½¿ç”¨ã€‚
æˆæƒé‡è¦çš„å‚æ•°å’ŒæŒ‡æ ‡:
response_typeå“åº”ç±»å‹: code(è¦æ±‚è¿”å›æˆæƒç ),token(è¦æ±‚è¿”å›æˆæƒToken) client_idå®¢æˆ·ç«¯èº«ä»½æ ‡è¯† client_secretå®¢æˆ·ç«¯ç§˜é’¥ redirect_urié‡å®šå‘åœ°å€ scopeæˆæƒèŒƒå›´, readåªè¯»æƒé™, allå…¨éƒ¨æƒé™ grant_typeæˆæƒæ–¹å¼ authorization_code(æˆæƒç )ã€password(å¯†ç )ã€client_credentials(å‡­è¯)ã€refresh_token(æ›´æ–°ä»¤ç‰Œ) stateåº”ç”¨ç¨‹åºä¼ é€’çš„ä¸€ä¸ªéšæœºæ•°ï¼Œé˜²æ­¢ CSRFæ”»å‡» æˆæƒç  åœ¨è®¿é—®ç¬¬ä¸‰æ–¹åº”ç”¨å…ˆç”³è¯·ä¸€ä¸ªæˆæƒç ï¼Œç„¶åå†ç”¨æˆæƒç è·å–ä»¤ç‰Œ.è¿™ç§æ–¹å¼ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„æµç¨‹ï¼Œå®‰å…¨æ€§ä¹Ÿæ˜¯æœ€é«˜çš„ï¼Œé€‚ç”¨äºæœ‰åç«¯çš„Webåº”ç”¨ã€‚æˆæƒç é€šè¿‡å‰ç«¯ä¼ é€ï¼Œä»¤ç‰Œå­˜å‚¨åœ¨åç«¯ã€‚æ‰€æœ‰çš„å’Œèµ„æºæœåŠ¡å™¨çš„äº¤äº’éƒ½åœ¨æœåŠ¡ç«¯å®Œæˆï¼Œé¿å…äº†ä»¤ç‰Œçš„æ³„éœ²ã€‚ æˆæƒç å’Œä»¤ç‰Œçš„åœ¨ æµè§ˆå™¨å’Œå®¢æˆ·ç«¯WEBåº”ç”¨ä»¥åŠèµ„æºæœåŠ¡å™¨çš„äº¤äº’æµç¨‹å¤§è‡´å¦‚ä¸‹: 1.2.3.4 ç”¨æˆ·é€‰æ‹© Googleç™»é™† yelp.com 3.4 Yelp.comè¯·æ±‚ç”¨æˆ·æˆæƒ Googleæƒé™ 5.6 ç”¨æˆ·åŒæ„åè¿”å›æˆæƒç  7.8 Yelp.comé€šè¿‡æˆæƒç  ä¼šå‘ Googleå‘èµ·è¯·æ±‚Token 9 éªŒè¯å¿…è¦å‚æ•°ï¼Œè¿”å› Token 10.11 æ“ä½œè¯·æ±‚ éšè—å¼ å¯†ç å¼ é¡¾åæ€è®®,åœ¨è‡ªå·±çš„ç³»ç»Ÿè¾“å…¥ç¬¬ä¸‰æ–¹ç³»ç»Ÿçš„è´¦å·å¯†ç ,è‡ªå·±çš„ç³»ç»Ÿæ‹¿è´¦å·å¯†ç å»ç”³è¯·ä»¤ç‰Œï¼Œå“åº”é¢˜é‡Œé¢è¿”å›token</description></item><item><title>04 å¦‚ä½•æ„å»ºä¸€ä¸ªç®€å•çš„RPCè°ƒç”¨</title><link>https://pinkhello.me/posts/04-%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84rpc%E8%B0%83%E7%94%A8/</link><pubDate>Wed, 10 Feb 2021 08:24:19 +0800</pubDate><guid>https://pinkhello.me/posts/04-%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84rpc%E8%B0%83%E7%94%A8/</guid><description>1ã€ä»€ä¹ˆå«RPC?
RPCæ„æˆ
RPC Consumer RPC Provider ConfigServer 1ã€Provider å¯åŠ¨ ConfigServer æ³¨å†ŒæœåŠ¡ 2ã€Consumer å¯åŠ¨ ConfigServer è®¢é˜…æœåŠ¡ï¼Œ 3ã€å‘èµ·è°ƒç”¨ Consumer &amp;mdash;&amp;gt; Provider 4ã€å“åº”è°ƒç”¨ Consumer &amp;lt;&amp;mdash; Provider 2ã€ä»€ä¹ˆæ˜¯ Netty ? https://netty.io/
3ã€ç°æœ‰çš„å¼€æºçš„é¡¹ç›®æ˜¯å¦ä½¿ç”¨äº† Netty ?
Dubbo Grpc Spark &amp;hellip;. 4ã€RPC Provider å¯åŠ¨
Netty Server æ–¹å¼å¯åŠ¨ Rpc æœåŠ¡çš„æ³¨å†Œ 5ã€RPC Consumer å¯åŠ¨
Netty Client æ–¹å¼å¯åŠ¨ RPC æ³›åŒ–è°ƒç”¨ã€é€šè¿‡å­—èŠ‚ç åŸºäºåå°„æ¥å®ç°è¿œç¨‹è°ƒåº¦ Consumer æœåŠ¡è®¢é˜… å¯åŠ¨æ—¶å»ºç«‹é•¿è¿æ¥ 6ã€ä»ç¬¬å››å¯ä»¥çœ‹å‡ºï¼Œå¤šä¸ª Provider æ˜¯ç”±ä¸€ä¸ª NettyServer æä¾›çš„ï¼Œé€šè¿‡ HandlerMap æ˜ å°„æ‰¾åˆ°å¯¹åº”çš„ Ioc Beanï¼Œå®ŒæˆæœåŠ¡è°ƒç”¨</description></item><item><title>å›æœ›K8S æŒä¹…åŒ–å­˜å‚¨</title><link>https://pinkhello.me/posts/22-%E5%9B%9E%E6%9C%9Bk8s-%E6%8C%81%E4%B9%85%E5%8C%96%E5%AD%98%E5%82%A8/</link><pubDate>Sat, 21 Mar 2020 17:17:13 +0800</pubDate><guid>https://pinkhello.me/posts/22-%E5%9B%9E%E6%9C%9Bk8s-%E6%8C%81%E4%B9%85%E5%8C%96%E5%AD%98%E5%82%A8/</guid><description>PVã€PVCã€StorageClass è¯´çš„å•¥ï¼Ÿ PV: æŒä¹…åŒ–å­˜å‚¨æ•°æ®å·ï¼Œè¿™ä¸ª API ä¸»è¦å®šä¹‰çš„æ˜¯ä¸€ä¸ªæŒä¹…åŒ–å­˜å‚¨åœ¨å®¿ä¸»æœºä¸Šçš„ä¸€ä¸ªç›®å½•ã€‚ä¸€èˆ¬ç”±è¿ç»´äººå‘˜è¿›è¡Œå®šä¹‰ï¼Œæ¯”å¦‚å®šä¹‰ä¸€ä¸ª NFS ç±»å‹çš„ PV
apiVersion:v1kind:PersistentVolumemetadata:name:nfsspec:storageClassName:manualcapacity:storage:1GiaccessModes:- ReadWriteManynfs:server:10.244.1.5path:&amp;#34;/&amp;#34;PVC: POD æ‰€å¸Œæœ›ä½¿ç”¨çš„æŒä¹…åŒ–å­˜å‚¨çš„å±æ€§. æ¯”å¦‚ Volume çš„å­˜å‚¨å¤§å°ã€å¯è¯»å†™æƒé™ç­‰. PVC ä¸€èˆ¬ç”±å¼€å‘äººå‘˜åˆ›å»ºã€æˆ–è€…ç”± PVCæ¨¡æ¿çš„æ–¹å¼æˆä¸ºStatefulSetçš„ä¸€éƒ¨åˆ†ï¼Œç”±StatefulSetæ§åˆ¶å™¨è´Ÿè´£åˆ›å»ºå¸¦ç¼–å·çš„PVC.
# åˆ›å»ºä¸€ä¸ª 1 GB å¤§å°çš„PVC---apiVersion:v1kind:PersistentVolumeClaimmetadata:name:nfsspec:accessModes:- ReadWriteManystorageClassName:manualresources:requests:storage:1Gi...ç”¨æˆ·åˆ›å»ºçš„PVCè¦çœŸæ­£çš„è¢«å®¹å™¨ä½¿ç”¨çš„åŒ–ï¼Œéœ€è¦äºå¿ƒå’ŒæŸä¸ªç¬¦åˆæ¡ä»¶çš„PVè¿›è¡Œç»‘å®šï¼š
ç¬¬ä¸€ä¸ªæ¡ä»¶ï¼ŒPV å’Œ PVC çš„ spec å­—æ®µã€‚ä¾‹å¦‚: PV çš„å­˜å‚¨(storage)å¤§å°å°±å¿…é¡»æ»¡è¶³ PVC çš„è¦æ±‚ ç¬¬äºŒä¸ªæ¡ä»¶ï¼ŒPV å’Œ PVC çš„ storageClassName å­—æ®µåç§°å¿…é¡»ä¸€æ ·ã€‚ ä¸‹é¢æ˜¯å»ä½¿ç”¨è¿™ä¸ªPVC
apiVersion:v1kind:Podmetadata:labels:role:web-frontendspec:containers:- name:webimage:nginxports:- name:webcontainerPort:80volumeMounts:- name:nfsmountPath:&amp;#34;/usr/share/nginx/html&amp;#34;volumes:- name:nfspersistentVolumeClaim:claimName:nfsPVC ç†è§£ä¸ºæŒä¹…åŒ–å­˜å‚¨çš„ æ¥å£ï¼Œå®ƒæä¾›äº†å¯¹æŸç§æŒä¹…åŒ–å­˜å‚¨çš„æè¿°ï¼Œä½†ä¸æä¾›å…·ä½“çš„å®ç°ï¼Œè€Œè¿™ä¸ªæŒä¹…åŒ–çš„å®ç°éƒ¨åˆ†ç”± PV å®Œæˆã€‚
å‡è®¾ï¼Œæˆ‘ä»¬åœ¨åˆ›å»º POD çš„æ—¶å€™ï¼Œç³»ç»Ÿå†…å¹¶æ²¡æœ‰åˆé€‚çš„ PV è·Ÿå®ƒå®šä¹‰çš„ PVC ç»‘å®šï¼Œè¿™ä¸ªæ—¶å€™å®¹å™¨æƒ³è¦ä½¿ç”¨çš„ Volume ä¸å­˜åœ¨ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿ
åœ¨ Kubernetes å†…ï¼Œæ—¶æœºå­˜åœ¨ä¸€ä¸ªä¸“é—¨å¤„ç†æŒä¹…åŒ–å­˜å‚¨çš„æ§åˆ¶å™¨ï¼Œå«åš VolumeControllerã€‚è¿™ä¸ªVolumeControllerç»´æŠ¤ç€å¤šä¸ªæ§åˆ¶å¾ªç¯, å…¶ä¸­æœ‰ä¸ªå¾ªç¯å°±æ˜¯ç”¨æ¥æ’®åˆ PV å’Œ PVC è¿›è¡Œç»‘å®šçš„è§’è‰²ï¼Œåå­—å« PersistentVolumeController.</description></item><item><title>å›æœ›K8S å®¹å™¨ç¼–æ’ä¸Kubernetesä½œä¸šç®¡ç†</title><link>https://pinkhello.me/posts/20-%E5%9B%9E%E6%9C%9Bk8s-%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E4%B8%8Ekubernetes%E4%BD%9C%E4%B8%9A%E7%AE%A1%E7%90%86/</link><pubDate>Sun, 16 Feb 2020 22:48:35 +0800</pubDate><guid>https://pinkhello.me/posts/20-%E5%9B%9E%E6%9C%9Bk8s-%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E4%B8%8Ekubernetes%E4%BD%9C%E4%B8%9A%E7%AE%A1%E7%90%86/</guid><description>Pod pod æ˜¯ Kubernetes é¡¹ç›®çš„æœ€å°çš„ API å¯¹è±¡ï¼ŒåŸå­è°ƒåº¦å•ä½.
å‡è®¾ &amp;ldquo;å®¹å™¨çš„æœ¬è´¨æ˜¯è¿›ç¨‹&amp;rdquo;ï¼Œå®¹å™¨é•œåƒå°±æ˜¯ exe å®‰è£…åŒ…, kubernetes æ˜¯æ“ä½œç³»ç»Ÿ
Pod æœ€é‡è¦çš„ä¸€ä¸ªäº‹å®æ˜¯ä¸€ä¸ªé€»è¾‘æ¦‚å¿µã€‚å®ƒå¯¹äº Kubernetes æœ€æ ¸å¿ƒçš„æ„ä¹‰æ˜¯ å®¹å™¨è®¾è®¡æ¨¡å¼ã€‚Kubernetes çœŸæ­£å¤„ç†çš„è¿˜æ˜¯å®¿ä¸»æœºä¸Šæ“ä½œç³»ç»Ÿä¸Šçš„ Linux å®¹å™¨çš„ Namespace å’Œ Cgroupsï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ‰€è°“çš„ Pod è¾¹ç•Œå’Œéš”ç¦»ç¯å¢ƒã€‚
Pod å…¶å®æ˜¯ä¸€ç»„å…±äº«äº†æŸäº›èµ„æºçš„å®¹å™¨ã€‚Pod é‡Œé¢æ‰€æœ‰çš„å®¹å™¨ï¼Œå…±äº«çš„åŒä¸€ä¸ª Network Namespaceï¼Œå¹¶ä¸”å¯ä»¥å£°æ˜å…±äº«åŒä¸€ä¸ª Volume.
Kubernetes é¡¹ç›®å†…éƒ¨ï¼ŒPod å®ç°éœ€è¦ä½¿ç”¨ä¸€ä¸ªä¸­é—´å®¹å™¨ï¼Œè¿™ä¸ªå®¹å™¨å«åš Infra å®¹å™¨ï¼Œåœ¨ Pod ä¸­ï¼ŒInfra å®¹å™¨æ°¸è¿œéƒ½æ˜¯ç¬¬ä¸€ä¸ªè¢«åˆ›å»ºçš„å®¹å™¨ï¼Œè€Œå…¶ä»–ç”¨æˆ·å®šä¹‰çš„å®¹å™¨ï¼Œåˆ™é€šè¿‡ Join Network Namespace çš„æ–¹å¼ï¼Œä¸ Infra å®¹å™¨å…³è”åœ¨ä¸€èµ·ã€‚
sidecar å…¸å‹çš„ä¾‹å­ï¼šWAR åŒ…å’Œ Web æœåŠ¡å™¨ PODåï¼Œå°† WAR åŒ…å’Œ Tomcat åˆ†åˆ«åšæˆé•œåƒï¼Œå¯ä»¥æŠŠä»–ä»¬å®¹å™¨ç»“åˆåœ¨ä¸€èµ·
---apiVersion:v1kind:Podmetadata:name:javaweb-2spec:# å¯åŠ¨ååšäº†ä¸€ä»¶äº‹ æŠŠåº”ç”¨çš„WARåŒ…æ‹·è´åˆ° /appç›®å½•ä¸­ï¼Œåé€€å‡ºinitContainers:- image:sample-war:v2name:warcommand:[&amp;#34;cp&amp;#34;,&amp;#34;/sample.war&amp;#34;,&amp;#34;/app&amp;#34;]volumeMounts:- mountPath:/appname:app-volumecontainers:- image:tomcat:7.0name:tomcatcommand:[&amp;#34;sh&amp;#34;,&amp;#34;-c&amp;#34;,&amp;#34;/root/apache-tomcat-7.0.42-v2/bin/start.sh&amp;#34;]volumeMounts:- mountPath:/root/apache-tomcat-7.0.42-v2/webappsname:app-volumeports:- containerPort:8080hostPort:8001volumes:- name:app-volumeemptyDir:{}...è¿™ä¸ªPODä¸­ï¼Œå®šä¹‰äº†ä¸¤ä¸ªå®¹å™¨ï¼Œç¬¬ä¸€ä¸ªå®¹å™¨é•œåƒ sample-war:v2ï¼Œç¬¬äºŒä¸ªå®¹å™¨é•œåƒæ˜¯ Tomcat é•œåƒï¼ŒWaråŒ…å®¹å™¨çš„ç±»å‹ä¸æ˜¯ä¸€ä¸ªæ™®é€šå®¹å™¨ï¼Œæ˜¯ä¸€ä¸ª Init Container ç±»å‹çš„å®¹å™¨ã€‚</description></item><item><title>å›æœ›K8S Kubernetesæ‹¼å›¾</title><link>https://pinkhello.me/posts/19-%E5%9B%9E%E6%9C%9Bk8s-kubernetes%E6%8B%BC%E5%9B%BE/</link><pubDate>Sun, 16 Feb 2020 20:57:38 +0800</pubDate><guid>https://pinkhello.me/posts/19-%E5%9B%9E%E6%9C%9Bk8s-kubernetes%E6%8B%BC%E5%9B%BE/</guid><description>kubernetes å®‰è£… all èŠ‚ç‚¹å®‰è£… Docker å’Œ Kubeadm æ‰€æœ‰èŠ‚ç‚¹ root ç”¨æˆ·ä¸‹æ“ä½œ
&amp;gt; curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add - &amp;gt; cat &amp;lt;&amp;lt;EOF &amp;gt; /etc/apt/sources.list.d/kubernetes.list deb http://apt.kubernetes.io/ kubernetes-xenial main EOF &amp;gt; apt-get update # è¿™ä¸€æ­¥å®‰è£…çš„æ—¶å€™ kubeadm å’Œ kubeletã€kubectlã€kubernetes-cni éƒ½ä¼šè‡ªåŠ¨å®‰è£…å®Œæ¯• &amp;gt; apt-get install -y docker.io kubeadm æç¤ºï¼šå¦‚æœ apt.kubernetes.io å› ä¸ºç½‘ç»œé—®é¢˜è®¿é—®ä¸åˆ°ï¼Œå¯ä»¥æ¢æˆä¸­ç§‘å¤§çš„ Ubuntu é•œåƒæº deb http://mirrors.ustc.edu.cn/kubernetes/apt kubernetes-xenial mainã€‚
éƒ¨ç½² Kubernetes Master å£°æ˜ä¸€ä¸ª kubeadm.yaml
---apiVersion:kubeadm.k8s.io/v1alpha1kind:MasterConfigurationcontrollerManagerExtraArgs:# é…ç½®äº†è‡ªå®šä¹‰è‡ªåŠ¨æ°´å¹³æ‰©å±•horizontal-pod-autoscaler-use-rest-clients:&amp;#34;true&amp;#34;horizontal-pod-autoscaler-sync-period:&amp;#34;10s&amp;#34;node-monitor-grace-period:&amp;#34;10s&amp;#34;apiServerExtraArgs:runtime-config:&amp;#34;api/all=true&amp;#34;# kubeadm éƒ¨ç½²çš„ kubernetes çš„ç‰ˆæœ¬kubernetesVersion:&amp;#34;stable-1.11&amp;#34;Â·Â·Â·æ‰§è¡Œä¸‹é¢çš„æŒ‡ä»¤ï¼Œå®Œæˆ kubernetes master éƒ¨ç½²ï¼Œè¿™å›ç”Ÿæˆä¸€è¡ŒæŒ‡ä»¤
&amp;gt; kubeadm init --config kubeadm.</description></item><item><title>å›æœ›K8S ç™½è¯å®¹å™¨</title><link>https://pinkhello.me/posts/18-%E5%9B%9E%E6%9C%9Bk8s-%E7%99%BD%E8%AF%9D%E5%AE%B9%E5%99%A8/</link><pubDate>Sat, 15 Feb 2020 10:16:34 +0800</pubDate><guid>https://pinkhello.me/posts/18-%E5%9B%9E%E6%9C%9Bk8s-%E7%99%BD%E8%AF%9D%E5%AE%B9%E5%99%A8/</guid><description>è¿›ç¨‹å¼€å¯ å®¹å™¨, åˆ°åº•æ˜¯ä»€ä¹ˆ? å‰é¢æå‡º: å®¹å™¨æ˜¯ä¸€ç§æ²™ç›’æŠ€æœ¯. å°±æ˜¯ä¸€ä¸ªé›†è£…ç®±, æŠŠåº”ç”¨è£…èµ·æ¥çš„æŠ€æœ¯. è¿™æ ·, åº”ç”¨ä¸åº”ç”¨ä¹‹é—´æœ‰äº†è¾¹ç•Œä¸è‡³äºäº’ç›¸å¹²æ‰°; æœ‰äº†è¿™äº›é›†è£…ç®±, ä¹Ÿæ–¹ä¾¿æ¬æ¥æ¬å».
ç å†œéƒ½çŸ¥é“å¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯ä»£ç çš„å¯æ‰§è¡Œé•œåƒ(executable image). ä¸€æ—¦ç¨‹åºæ‰§è¡Œèµ·æ¥, å†…å­˜æ•°æ®ã€å¯„å­˜å™¨çš„å€¼ã€å †æ ˆçš„æŒ‡ä»¤ã€æ‰“å¼€çš„æ–‡ä»¶ç­‰è¿™äº›é›†åˆæ±‡é›†æˆä¸€ä¸ªç¨‹åºçš„è®¡ç®—æœºæ‰§è¡Œç¯å¢ƒæ€»å’Œ: è¿›ç¨‹.
è¿›ç¨‹: é™æ€è¡¨ç°æ˜¯ç¨‹åº, åŠ¨æ€è¡¨ç°è®¡ç®—æœºçš„æ•°æ®å’ŒçŠ¶æ€çš„æ€»å’Œã€‚
å®¹å™¨çš„æ ¸å¿ƒåŠŸèƒ½, å°±æ˜¯é€šè¿‡çº¦æŸå’Œä¿®æ”¹è¿›ç¨‹çš„åŠ¨æ€è¡¨ç°, ä»è€Œä¸ºå…¶åˆ›é€ ä¸€ä¸ª&amp;quot;è¾¹ç•Œ&amp;quot;.
Cgroups æŠ€æœ¯ åˆ¶é€ çº¦æŸçš„ä¸»è¦æ‰‹æ®µ Namespace æŠ€æœ¯ ä¿®æ”¹è¿›ç¨‹è§†å›¾çš„ä¸»è¦æ–¹æ³• docker run , -it å‘Šè¯‰ Docker å¯åŠ¨å®¹å™¨å, éœ€è¦åˆ†é…ä¸€ä¸ªæ–‡æœ¬è¾“å…¥/è¾“å‡ºç¯å¢ƒ, ä¹Ÿå°±æ˜¯ TTY, è·Ÿå®¹å™¨çš„æ ‡å‡†è¾“å…¥ç›¸å…³è”, è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å’Œè¿™ä¸ªDockerå®¹å™¨è¿›è¡Œäº¤äº’äº†ã€‚è€Œ /bin/sh å°±æ˜¯æˆ‘ä»¬åœ¨ Docker å®¹å™¨é‡Œè¿è¡Œçš„ç¨‹åº.
&amp;gt; docker run -it busybox /bin/sh / # å¸®æˆ‘å¯åŠ¨ä¸€ä¸ªå®¹å™¨, åœ¨å®¹å™¨é‡Œæ‰§è¡Œ /bin/sh, å¹¶ä¸”ç»™æˆ‘åˆ†é…ä¸€ä¸ªå‘½ä»¤è¡Œç»ˆç«¯è·Ÿè¿™ä¸ªå®¹å™¨è¿›è¡Œäº¤äº’, åœ¨è¿™ä¸ªæ‰§è¡Œç¯å¢ƒä¸‹å¯ä»¥å®Œå…¨æ‰§è¡ŒLINUXå‘½ä»¤,ä¸”ä¸å®¿ä¸»æœºå®Œå…¨éš”ç¦»åœ¨ä¸åŒçš„ä¸–ç•Œä¸­.
Dockerå¯¹è¢«éš”ç¦»åº”ç”¨çš„è¿›ç¨‹ç©ºé—´åšäº†æ‰‹è„š, ä½¿å¾—è¿™äº›è¿›ç¨‹åªèƒ½çœ‹åˆ°é‡æ–°è®¡ç®—çš„è¿›ç¨‹ç¼–å·, å¯æ˜¯å®é™…ä¸Š, ä»–ä»¬åœ¨å®¿ä¸»æœºçš„æ“ä½œç³»ç»Ÿé‡Œ, è¿˜æ˜¯åŸæ¥çš„ç¬¬Nå·è¿›ç¨‹. è¿™ç§æŠ€æœ¯å°±æ˜¯Linuxå†…éƒ¨çš„Namespaceæœºåˆ¶ã€‚
Namespace çš„ä½¿ç”¨æ–¹å¼ä¹Ÿéå¸¸æœ‰æ„æ€ï¼šå®ƒå…¶å®åªæ˜¯ Linux åˆ›å»ºæ–°è¿›ç¨‹çš„ä¸€ä¸ªå¯é€‰å‚æ•°ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ Linux ç³»ç»Ÿä¸­åˆ›å»ºçº¿ç¨‹çš„ç³»ç»Ÿè°ƒç”¨æ˜¯ clone()ï¼Œæ¯”å¦‚ï¼š</description></item><item><title>å›æœ›K8S å°é²¸é±¼å®¹å™¨æŠ€æœ¯</title><link>https://pinkhello.me/posts/17-%E5%9B%9E%E6%9C%9Bk8s-%E5%B0%8F%E9%B2%B8%E9%B1%BC%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/</link><pubDate>Tue, 11 Feb 2020 10:50:42 +0800</pubDate><guid>https://pinkhello.me/posts/17-%E5%9B%9E%E6%9C%9Bk8s-%E5%B0%8F%E9%B2%B8%E9%B1%BC%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/</guid><description>ä»€ä¹ˆæ˜¯å®¹å™¨ åœ¨å®¹å™¨ä¹‹å‰, ç«çˆ†äº‘è®¡ç®—å¸‚åœºçš„æ˜¯ PAAS, PAASå·²ç»æ·±å…¥äººå¿ƒ. é‚£æ—¶å€™çªç„¶æœ‰ä¸€å®¶å…¬å¸ dotCloud å‰‘èµ°åé”‹, ç›´æ¥å¼€æºå‡ºäº† Docker é¡¹ç›®ï¼Œå¹¶ä¸”ç›´æ¥é¢å‘çš„ç¤¾åŒºã€‚ è¿™æ ·çš„åšæ³•ç›´æ¥å°†å½“æ—¶çš„PAASæµä¸»è¦å…¬å¸æ‰“çš„å±æ»šå°¿æµã€‚
å›å¤´çœ‹, PAAS æœ€æ ¸å¿ƒçš„æ˜¯éš”ç¦»ç¯å¢ƒ,æˆ–è€…å« æ²™ç›’,åœ¨æˆ‘çœ‹æ¥ä¹Ÿå°±æ˜¯ å®¹å™¨. è€Œ Docker é¡¹ç›®å’Œ Cloud Foundry çš„å®¹å™¨æ²¡æœ‰å¤ªå¤§çš„ä¸åŒ,ä½†æ˜¯å®ƒä¸ºä»€ä¹ˆèƒ½é’ˆå¯¹ PAASè¿›è¡Œäº†ä¸€åœºå¿«é€Ÿçš„é—ªç”µæˆ˜å‘¢ï¼Ÿ
å¯¹çš„, å°±æ˜¯ Docker é•œåƒ, è¿™ä¸ªå°å°çš„åˆ›æ–°, è¿…é€Ÿæ”¹å˜äº†äº‘è®¡ç®—çš„å‘å±•è½¨è¿¹! Docker é•œåƒè§£å†³çš„æ˜¯ æ‰“åŒ… é—®é¢˜ã€‚ä¹Ÿè®¸æœ‰äººè¯´Docker é•œåƒå°±æ˜¯ä¸€ä¸ªå‹ç¼©åŒ…ã€‚ä½†æ˜¯å°±æ˜¯è¿™ä¸ªå‹ç¼©åŒ…åŒ…å«äº†å®Œæ•´çš„æ“ä½œç³»ç»Ÿæ–‡ä»¶å’Œç›®å½•, åŒ…å«äº†æ•´ä¸ªåº”ç”¨æ‰€éœ€è¦çš„ä¾èµ–ï¼Œä¸€åŒ…åœ¨æ‰‹, ä½ å¯ä»¥è½»æ˜“çš„è¿è¡Œä½ çš„æ²™ç›’,å¹¶ä¸”æœ¬åœ°ç¯å¢ƒä¸äº‘ç«¯ç¯å¢ƒé«˜åº¦ä¸€è‡´ï¼ˆè¿™æ˜¯æœ€å®è´µçš„ï¼‰ã€‚
Dockerç»™PAASè¿›è¡Œäº†è‡´å‘½æ‰“å‡», æä¾›äº†ä¾¿åˆ©çš„æ‰“åŒ…æœºåˆ¶, é¢å‘åç«¯å¼€å‘è€…æ¥è¯´, å±è”½äº†æœºå™¨ã€å†…æ ¸ç­‰æŠ€æœ¯ç»†èŠ‚, é¿å…äº†åœ¨ä¸åŒç¯å¢ƒé—´çš„å·®å¼‚å¼•å…¥çš„è¯•é”™æˆæœ¬ã€‚æ˜¯ä¸€æ¬¡è§£æ”¾ç”Ÿäº§åŠ›çš„é©å‘½ã€‚å½“ç„¶å¾ˆå¤šå¼€å‘è€…ç”¨è„šæŠ•ç¥¨, äº†ç»“äº†PAASæ—¶ä»£ã€‚
Docker ä¸‰å¤§åˆ©å™¨ Dockeré¡¹ç›®çš„é«˜è°ƒå¼€æº, è§£å†³äº†æ‰“åŒ…å’Œå‘å¸ƒå›°æ‰°è¿ç»´çš„æŠ€æœ¯éš¾é¢˜ï¼ŒåŒæ—¶å®ƒä¹Ÿç¬¬ä¸€æ¬¡çº¯åç«¯çš„æ¦‚å¿µé€šè¿‡å‹å¥½çš„è®¾è®¡å’Œå°è£…äº¤ä»˜åˆ°äº†å¼€å‘è€…çš„æ‰‹é‡Œã€‚ Swarm,Dockeræ˜¯åˆ›å»ºå’Œå¯åœå®¹å™¨çš„å·¥å…·,é‚£ä¹ˆSwarmæ˜¯ä¸ºäº†å‘å¹³å°åŒ–å‘å±•è€Œæå‡ºçš„ã€‚å®ƒæä¾›äº†å®Œæ•´çš„æ•´ä½“å¯¹å¤–æä¾›é›†ç¾¤ç®¡ç†åŠŸèƒ½,å®ƒçš„äº®ç‚¹æ˜¯å®Œå…¨ä½¿ç”¨DockeråŸæœ¬çš„ç®¡ç†å®¹å™¨çš„APIæ¥å®Œæˆé›†ç¾¤ç®¡ç† # Swarmå¤šæœºç¯å¢ƒä¸‹ï¼ŒæŒ‡ä»¤ä¼šè¢«Swarmæ‹¦æˆªå¤„ç†ï¼Œåé¢é€šè¿‡è°ƒåº¦ç®—æ³•æ‰¾åˆ°åˆé€‚çš„Docker Daemonè¿è¡Œ docker run -H &amp;#34;Swarmé›†ç¾¤API&amp;#34; &amp;#34;æˆ‘çš„å®¹å™¨&amp;#34; Compose(Fig)é¡¹ç›®, è¿™æ˜¯ç¬¬ä¸€æ¬¡åœ¨å¼€å‘è€…é¢å‰æå‡º å®¹å™¨ç¼–æ’(Container Orchestration)æ¦‚å¿µã€‚ åº”ç”¨å®¹å™¨ A, æ•°æ®åº“å®¹å™¨B, è´Ÿè½½å‡è¡¡å®¹å™¨C, Compose å…è®¸ Aã€Bã€C ä¸‰ä¸ªå®¹å™¨å®šä¹‰åœ¨é…ç½®æ–‡ä»¶ä¸­, å¹¶æŒ‡å®šå…³è”å…³ç³».</description></item><item><title>14 å·¥ä½œçºªå®2020</title><link>https://pinkhello.me/posts/14-%E5%B7%A5%E4%BD%9C%E7%BA%AA%E5%AE%9E2020/</link><pubDate>Mon, 10 Feb 2020 10:00:19 +0800</pubDate><guid>https://pinkhello.me/posts/14-%E5%B7%A5%E4%BD%9C%E7%BA%AA%E5%AE%9E2020/</guid><description>æ¯æ—¥ä¸€æ€ç¯‡ [2019-10-12 æ¯æ—¥ä¸€æ€] Mysql WALæŠ€æœ¯ å’Œ RingBuffer æ€æƒ³å¥½ä¸€è‡´? [2019-10-14 æ¯æ—¥ä¸€æ€] JWT ç»­ç­¾è¯¥å¦‚ä½•åš? [2019-10-16 æ¯æ—¥ä¸€æ€] TCP/IP åè®®å…·ä½“æŒ‡å“ªäº›? æˆ‘ä»¬éƒ½çŸ¥é“ç½‘ç»œæ˜¯7å±‚æ¨¡å‹ï¼Œåº”è¡¨ä¼šä¼ ç½‘æ•°ç‰©ï¼Œ ç°åœ¨æˆ‘åªè®¨è®ºåº”ä¼ ç½‘æ•°è¿™4å±‚ã€‚TCP/IPåè®®åº”è¯¥è¢«ç§°ä¸ºTCP/IPæ—ï¼Œ æˆ‘çš„ç†è§£ä»–ä¸æ˜¯å±äºå•ä¸ªçš„åè®®ç±»å‹ï¼Œæ˜¯ä¸€ä¸ªç»Ÿç§°ï¼ŒçŸ¥é“ç½‘ç»œæ¨¡å‹æ ¸å¿ƒè®¾è®¡æ€æƒ³æ˜¯åˆ†å±‚ï¼Œä¸ºä»€ä¹ˆåˆ†å±‚ï¼Œåˆ†å±‚ä»è®¾è®¡ä¸Šå’Œå®ç°éš¾åº¦ä¸Šéƒ½ç®€å•å¾ˆå¤šï¼Œå“ªä¸€å±‚éœ€è¦ä¿®æ”¹åªéœ€è¦ä¿®æ”¹è¿™ä¸€å±‚ã€‚
åº”ç”¨å±‚ï¼Œåƒæœ€å¸¸è§çš„httpã€ftpã€dnsã€rtspã€rtmpç­‰ç­‰åè®®éƒ½æ˜¯å±äºè¿™ç±»ï¼Œ ä¼ è¾“å±‚å‘¢æŒ‰ç…§ä¼ è¾“ç±»å‹åˆåˆ†äº†TCPå’ŒUDP, ç½‘ç»œå±‚ï¼Œæ˜¯æ•°æ®åŒ…äº¤äº’çš„å±‚é¢ï¼Œ æ•°æ®é“¾è·¯å±‚æ˜¯å¤„ç†ç½‘å¡ã€æ“ä½œç³»ç»Ÿç­‰ç­‰è½¯ç¡¬æŠ½è±¡å‡ºçš„å¯è§éƒ¨åˆ†ã€‚ ä¸¾ä¸€ä¸ªæ —å­ï¼Œä¸€ä¸ªhttpè¯·æ±‚ï¼Œåœ¨åº”ç”¨å±‚é¢æ˜¯å®Œæ•´çš„ï¼Œåé¢è¢«ä¼ è¾“å±‚ï¼ˆTCPå±‚ï¼‰è¢«åˆ†åŒ…ï¼Œå¹¶æ‰“ä¸Šåºå·æ ‡è®°ï¼Œå†è¿›å…¥ç½‘ç»œå±‚ï¼ˆIPå±‚ï¼‰æ·»åŠ IPé¦–éƒ¨ï¼ˆç›®æ ‡macåœ°å€ç­‰ç­‰ï¼‰ï¼Œ ä¸‹é¢å°±æ˜¯å¼€å§‹ç–¯ç‹‚çš„å‘é€äº†ï¼Œæ¥æ”¶æ–¹ä¸€æ ·æ˜¯è¿™ä¸ªè¿‡ç¨‹çš„é€†åºã€‚åº”ç”¨å¤„ç†å®Œæˆåé¢çš„å“åº”è¿‡ç¨‹ä¸è¯·æ±‚è¿‡ç¨‹ä¸€æ ·çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚åŒæ—¶å¯ä»¥æ‰©å±•å‡ºL4ä¸L7çš„é—®é¢˜ï¼Œ å„è‡ªæ˜¯å¦‚ä½•å»å®ç°è´Ÿè½½å‡è¡¡çš„ï¼ŸL4æ˜¯å¯ä»¥çœ‹å‡ºæ˜¯åŸºäºä¼ è¾“å±‚å³TCPå±‚å·¥ä½œï¼ˆé€šè¿‡å‘å¸ƒVIPï¼ˆç¬¬ä¸‰å±‚ï¼‰ä»¥åŠç¬¬å››å±‚ç«¯å£ï¼‰ï¼ŒL7åŸºäºåº”ç”¨å±‚å·¥ä½œï¼ˆç¬¬å››å±‚åŸºç¡€ä¸Š+è€ƒè™‘åº”ç”¨ç‰¹å¾ï¼‰ï¼Œ æ¯”å¦‚HTTPçš„URLã€å®¢æˆ·ç«¯çš„ç±»åˆ«ã€è¯­è¨€ç±»å‹ç­‰ç­‰ã€‚
[2019-10-18 æ¯æ—¥ä¸€æ€]ä¸€ç§åœºæ™¯ï¼Œrabbitmq çš„ Exchange ä¸º fanout ç±»å‹ï¼Œç»‘å®šåˆ°å¤šä¸ªqueue, ä»€ä¹ˆæƒ…å†µä¼šè§¦å‘ rabbitmq æµæ§ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ [2019-10-22 æ¯æ—¥ä¸€æ€]IDåºåˆ—ç”Ÿäº§å™¨æ€ä¹ˆå®ç°å‘¢ï¼Ÿ uuidç”Ÿæˆ
åŸºäºæ—¶é—´ï¼ˆ60ä½utcæ—¶é—´ å’Œ æ—¶é—´åºåˆ—å€¼14ä½ï¼Œä»¥åŠmacåœ°å€ï¼‰ åŸºäºåç§°ï¼ˆé’ˆå¯¹å‘½åç©ºé—´dnsã€urlç­‰åˆ†é…ï¼ŒæŠŠåç§°è½¬æˆå­—èŠ‚åºåˆ—ï¼Œå†ç”¨md5æˆ–sha-1ä¸å‘½åç©ºé—´æ ‡è¯†è¿›è¡Œè®¡ç®—ï¼Œäº§ç”Ÿå“ˆå¸Œç»“æœï¼‰ åŸºäºéšæœºæ•°ï¼ˆå¯†ç å­¦éšæœºæ•°ï¼Œç³»ç»Ÿçš„ç¡¬ç›˜å†…å­˜çº¿ç¨‹å †æ ˆè¿›ç¨‹å¥æŸ„ç­‰sha-1ç”Ÿæˆå“ˆå¸Œç»“æœï¼‰ snowflakeï¼Œ64bitï¼Œlongå‹ID
IDç”Ÿæˆæ–¹å¼ 1bitï¼ˆä¸ä½¿ç”¨ï¼‰ï¼Œ41bitæ—¶é—´æˆ³ï¼ˆå½“å‰æ¯«ç§’æ•°ã€69å¹´ä¸€è½®å›ï¼‰ï¼Œ10bitæœºå™¨ç ï¼ˆ1024å°ï¼Œ5bitæ•°æ®ä¸­å¿ƒï¼Œ5bitæœºå™¨IDï¼‰ï¼Œ12bitä½œä¸ºæ¯«ç§’å†…åºåˆ—å·ï¼ˆå•æœºç†è®º 409.6w/sï¼‰ é›ªèŠ±ç®—æ³•ï¼Œå¤šå°æœºå™¨ï¼Œæœ‰å› ä¸ºæ—¶é’Ÿå›æ‹¨å¯¼è‡´çš„IDç”Ÿæˆé—®é¢˜ï¼Œå½“ç„¶å¯ä»¥é€šè¿‡å‘ç”Ÿæ—¶é’Ÿå›æ‹¨åä¸€ä¸ªé˜ˆå€¼ï¼Œåœ¨é˜ˆå€¼å†…åˆ™ä¸å…è®¸äº§ç”Ÿæ–°çš„IDï¼ŒåŒæ­¥é˜»å¡ï¼Œåœ¨é˜ˆå€¼å¤–é‡æ–°è®¾ç½®æœºå™¨IDæ¥è§£å†³ github.com/baidu/uid-generator æŠ€æœ¯è€é“ç™¾åº¦å¼€æºçš„åŸºäºsnowflakeå®ç°çš„IDç”Ÿæˆå™¨ï¼Œå¯ä»¥å€Ÿé‰´ç ”è¯»ä¸€ä¸‹ [2019-11-01 æ¯æ—¥ä¸€æ€]æˆ‘ä»¬å¸¸è¯´çš„é™æµæ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦é™æµï¼Ÿé™æµæœ‰å“ªäº›æ–¹å¼ï¼Ÿ æˆ‘ä»¬å¸¸è¯´çš„é™æµï¼Œé¡¾åæ€ä¹‰å³é™åˆ¶æµé‡. é™åˆ¶ç³»ç»Ÿçš„è¾“å…¥å’Œè¾“å‡º å¸¸ç”¨çš„é™æµå‘å±•è‡³ä»Šï¼Œæœ‰å››ç§æ–¹å¼
å›ºå®šæ—¶é—´è®¡æ•°å™¨ æ¼æ¡¶ ä»¤ç‰Œæ¡¶ æ»‘åŠ¨çª—å£è®¡æ•°å™¨ å›ºå®šçª—å£è®¡æ•°å™¨ï¼šä»¥å•ä½æ—¶é—´å†…è¿›å…¥ç³»ç»Ÿï¼ˆç³»ç»Ÿçº§åˆ«ï¼‰æˆ–è€…æŸä¸€ä¸ªå•ä¸€æ¥å£æœåŠ¡ï¼ˆç³»ç»ŸæœåŠ¡çº§åˆ«ï¼‰è¯·æ±‚æ¬¡æ•°ï¼Œåœ¨è¿™ä¸ªå•ä½æ—¶é—´å†…çš„è¶…è¿‡æ¬¡æ•°ï¼Œæ‹’ç»æœåŠ¡æˆ–è€…æ›´æ¢å…¶ä»–æ–¹æ¡ˆï¼ˆé™çº§ã€ç†”æ–­ï¼‰è¾¾åˆ°é™æµç›®çš„ã€‚</description></item><item><title>03 Stringä¸ºä»€ä¹ˆè®¾è®¡æˆfinal</title><link>https://pinkhello.me/posts/03-string%E4%B8%BA%E4%BB%80%E4%B9%88%E8%AE%BE%E8%AE%A1%E6%88%90final/</link><pubDate>Sun, 10 Feb 2019 08:19:51 +0800</pubDate><guid>https://pinkhello.me/posts/03-string%E4%B8%BA%E4%BB%80%E4%B9%88%E8%AE%BE%E8%AE%A1%E6%88%90final/</guid><description>Stringæºç å‰–æ public final class String implements java.io.Serializable, Comparable&amp;lt;String&amp;gt;, CharSequence { /** The value is used for character storage. */ private final char value[]; /** Cache the hash code for the string */ private int hash; // Default to 0 /** use serialVersionUID from JDK 1.0.2 for interoperability */ private static final long serialVersionUID = -6849794470754667710L; /** * Class String is special cased within the Serialization Stream Protocol. * * A String instance is written into an ObjectOutputStream according to * &amp;lt;a href=&amp;#34;{@docRoot}/.</description></item><item><title>02 å…³äºfinalçš„æ€è€ƒ</title><link>https://pinkhello.me/posts/02-%E5%85%B3%E4%BA%8Efinal%E7%9A%84%E6%80%9D%E8%80%83/</link><pubDate>Sun, 10 Feb 2019 08:09:36 +0800</pubDate><guid>https://pinkhello.me/posts/02-%E5%85%B3%E4%BA%8Efinal%E7%9A%84%E6%80%9D%E8%80%83/</guid><description>å…³äºfinalçš„æ€è€ƒ final æ˜¯å£°æ˜æ•°æ®åŸŸæœ€ç»ˆçš„,ä¸å¯ä»¥ä¿®æ”¹çš„ï¼Œå¸¸è§çš„ æ˜¯ç±»çš„ åºåˆ—åŒ–ID String ç±»ï¼Œå…¶æ•°æ®åŸŸéƒ½æ˜¯ final çš„ ä¿®æ”¹ final ä¿®é¥°çš„å±æ€§ åå°„ä¿®æ”¹ final ä¿®é¥°çš„æ•°æ®åŸŸã€éå¸¸æˆåŠŸçš„ä¿®æ”¹äº†ã€‘
public class Test { private final String name = &amp;#34;hello world&amp;#34;; public static void main(String[] args) throws NoSuchFieldException, IllegalAccessException { Test test = new Test(); Field field = test.getClass().getDeclaredField(&amp;#34;name&amp;#34;); field.setAccessible(true); field.set(test,&amp;#34;HELLO, WORLD!&amp;#34;); System.out.println(field.get(test)); System.out.println(test.name); } } è¾“å‡º Hello, WORLD! hello world ç¬¬ä¸€ä¸ªè¾“å‡ºæ˜¯å› ä¸ºè¯´æ˜è¿è¡ŒæˆåŠŸï¼Œä¿®æ”¹finalä¿®é¥°çš„å¯¹è±¡çš„å±æ€§æˆåŠŸä¿®æ”¹ï¼›
ä½†æ˜¯ç¬¬äºŒä¸ªè¾“å‡ºï¼Œè¡¨æ˜äº†æˆ‘ç›´æ¥ä½¿ç”¨ name çš„å±æ€§å´è¿˜æ˜¯è¾“å‡ºç«¯é¢åŸæ¥çš„å€¼.
åç¼–è¯‘åçš„ä»£ç 
public class Test { private final String name = &amp;#34;hello world&amp;#34;; public Test() { } public static void main(String[] args) throws NoSuchFieldException, IllegalAccessException { Test test = new Test(); Field field = test.</description></item><item><title>01 ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•</title><link>https://pinkhello.me/posts/01-%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C%E7%AE%97%E6%B3%95/</link><pubDate>Sat, 09 Feb 2019 22:50:46 +0800</pubDate><guid>https://pinkhello.me/posts/01-%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C%E7%AE%97%E6%B3%95/</guid><description>åˆ†å¸ƒå¼å‡è¡¡å¯»å€ç®—æ³• åœ¨åˆ†å¸ƒå¼é›†ç¾¤ä¸­ï¼Œå¯¹æœºå™¨çš„æ·»åŠ åˆ é™¤ï¼Œæˆ–è€…æœºå™¨æ•…éšœåè‡ªåŠ¨è„±è½é›†ç¾¤çš„æ“ä½œæ˜¯åˆ†å¸ƒå¼é›†ç¾¤ç®¡ç†çš„åŸºæœ¬åŠŸèƒ½ã€‚
åœ¨é›†ç¾¤ç¯å¢ƒä¸­ï¼Œåˆ¤æ–­åˆ†å¸ƒå¼å¯»å€ç®—æ³•å¥½åçš„åŸåˆ™ï¼š
å¹³è¡¡æ€§ï¼ˆBalanceï¼‰ å•è°ƒæ€§ï¼ˆMonotonicityï¼‰ åˆ†æ•£æ€§ï¼ˆSpreadï¼‰ è´Ÿè½½ï¼ˆLoadï¼‰ Hash(Object)%N é›†ç¾¤Nå°æœºå™¨ï¼Œæ ¹æ®Nå–æ¨¡ï¼Œè·¯ç”±åˆ°å¯¹åº”çš„æœºå™¨ï¼Œä½†æ˜¯ç¼ºç‚¹åœ¨äºï¼Œå¯¹äºæœºå™¨çš„æ·»åŠ åˆ é™¤ï¼Œå·²ç»ç¼“å­˜çš„æ•°æ®éƒ½å¤±æ•ˆã€ä¸¥é‡è¿åå•è°ƒæ€§ï¼Œ å¤§é‡çš„ç¼“å­˜é‡å»º
å‡è®¾0-3ä¸ªèŠ‚ç‚¹ã€20ä¸ªæ•°æ®: è¿›è¡Œå–æ¨¡ååˆ†å¸ƒ: æ‰©å®¹å: å½“å‰åªæœ‰4ä¸ªæ•°æ®èƒ½å‘½ä¸­ã€‚å‘½ä¸­ç‡ 4/20 = 20% ,å‘½ä¸­ç‡åº•ä¸‹ï¼Œå¹¶ä¸”æœ‰å¤§é‡ç¼“å­˜éœ€è¦é‡å»º
ä¸€è‡´æ€§Hash ( DHT ) å…¬å…±å“ˆå¸Œå‡½æ•°å’Œå“ˆå¸Œç¯ Hashç®—æ³•è®¾è®¡: é‡‡å–å–æ¨¡æ–¹å¼ï¼ŒæŒ‰å¸¸ç”¨çš„ Hash ç®—æ³•å°†å¯¹åº”çš„ Key å“ˆå¸Œåˆ°ä¸€ä¸ªå…·æœ‰ 2^32 æ¬¡æ–¹çš„æ¡¶ç©ºé—´ä¸­ï¼Œå³ 0 ~ (2^32)-1 çš„æ•°å­—ç©ºé—´ã€‚æƒ³æƒ³ä¸€ä¸‹ï¼Œå°†æ•°å­—é¦–ä½ç›¸è¿ï¼Œç»„æˆä¸€ä¸ªé—­åˆçš„ç¯å½¢ã€‚ å¯¹è±¡(Object)æ˜ å°„åˆ°å“ˆå¸Œç¯ æŠŠå¯¹è±¡æ˜ å°„åˆ° 0-2^32-1 ç©ºé—´é‡Œï¼Œå‡è®¾æœ‰4ä¸ªå¯¹è±¡ object1-4 ï¼Œæ˜ å°„è¿›hashç¯çŠ¶ ç¼“å­˜(Cache)æ˜ å°„åˆ°å“ˆå¸Œç¯ ä¸‹é¢å°† Cache æ˜ å°„è¿› Hash ç©ºé—´ï¼Œå‡è®¾ç°åœ¨æœ‰ä¸‰ä¸ªcacheï¼š
åŸºæœ¬æ€æƒ³å°±æ˜¯ Object å’Œ Cache éƒ½æ˜ å°„åˆ°åŒä¸€ Hash æ•°å€¼ç©ºé—´ä¸­ï¼Œå¹¶ä¸”ä½¿ç”¨ç›¸åŒçš„ Hashç®—æ³•ï¼Œå¯ä»¥ä½¿ç”¨ Cache çš„ IPåœ°å€æˆ–è€…å…¶ä»–å› å­ï¼‰</description></item><item><title>00 Threadlocal é­”æ³•</title><link>https://pinkhello.me/posts/00-threadlocal-%E9%AD%94%E6%B3%95/</link><pubDate>Sat, 09 Feb 2019 22:25:26 +0800</pubDate><guid>https://pinkhello.me/posts/00-threadlocal-%E9%AD%94%E6%B3%95/</guid><description>ThreadLocal è¯¦è§£ å‰è¨€ å¯¹äº ThreadLocal çš„ä½¿ç”¨ï¼Œå¹¶ä¸éš¾ï¼Œè¿™æ¬¡ä¸»è¦è®²è¿° ThreadLocal çš„å®ç°æ–¹å¼ä»¥åŠåŸç†
ThreadLocal æ˜¯ä»€ä¹ˆ ThreadLocal ä¸ºè§£å†³å¤šçº¿ç¨‹å¹¶å‘é—®é¢˜æä¾›çš„ä¸€ç§æ–°çš„æ€è·¯ã€‚
å½“ä½¿ç”¨ ThreadLocal ç»´æŠ¤å˜é‡çš„æ—¶å€™ï¼ŒThreadLocal ä¸ºæ¯ä¸ªä½¿ç”¨è¯¥å˜é‡çš„çº¿ç¨‹æä¾›ç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ï¼Œæ‰€ä»¥æ¯ä¸ªçº¿ç¨‹éƒ½å¯ä»¥ç‹¬ç«‹ä¿®æ”¹è‡ªå·±çš„å‰¯æœ¬ï¼Œè€Œä¸ä¼šä¿®æ”¹åˆ°å…¶ä»–äººçš„å˜é‡å‰¯æœ¬ã€‚
ä»çº¿ç¨‹è§’åº¦çœ‹ï¼ŒLocal å³æœ¬åœ°æ„æ€ï¼Œç›®æ ‡å˜é‡å°±åƒæ˜¯çº¿ç¨‹çš„æœ¬åœ°å˜é‡ã€‚
åŸç† ThreadLocal æ˜¯è¿æ¥ Thread ä¸ ThreadLocalMap ç²˜åˆå‰‚ï¼Œæ˜¯ç”¨æ¥å¤„ç† Thread çš„ ThreadLocalMap å±æ€§ï¼Œ åŒ…æ‹¬ initialValue() å˜é‡ï¼Œset å¯¹åº”çš„å˜é‡ï¼Œget å¯¹åº”çš„å˜é‡ã€‚
ThreadLocalMap ç”¨æ¥å­˜å‚¨æ•°æ®ï¼Œé‡‡ç”¨ç±»ä¼¼HashMapçš„æœºåˆ¶ï¼Œå­˜å‚¨äº†ä»¥ThreadLocalä¸ºKeyï¼Œç›®æ ‡æ•°æ®ä¸ºValueçš„Entryé”®å€¼å¯¹æ•°ç»„ç»“æ„ã€‚
Thread æœ‰ä¸ª ThreadLocalMap çš„å±æ€§ï¼Œå­˜å‚¨çš„æ•°æ®å­˜æ”¾åœ¨æ­¤å¤„ã€‚
Threadã€ThreadLocalã€ ThreadLocalMapçš„å…³ç³» ThreadLocalMap æ˜¯ ThreadLocal çš„å†…éƒ¨ç±»ï¼Œæœ‰ ThreadLocalåˆ›å»ºï¼ŒThreadæœ‰ ThreadLocal.ThreadLocalMap ç±»å‹çš„å±æ€§ï¼Œæºç å¦‚ä¸‹
Thread public class Thread implements Runnable { /* * ThreadLocal values pertaining to this thread. This map is maintained * by the ThreadLocal class.</description></item></channel></rss>